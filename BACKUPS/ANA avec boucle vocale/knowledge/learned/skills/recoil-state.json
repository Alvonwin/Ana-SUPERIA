{
  "category": "recoil-state",
  "version": "1.0.0",
  "generatedBy": "Claude (Opus 4.5)",
  "description": "Recoil state management patterns",
  "skills": [
    {"id": "rec01", "type": "setup", "name": "Install Recoil", "description": "NPM install", "pattern": "npm install recoil", "example": "Install"},
    {"id": "rec02", "type": "root", "name": "RecoilRoot", "description": "Provider setup", "pattern": "import { RecoilRoot } from 'recoil';\n\nfunction App() {\n  return (\n    <RecoilRoot>\n      <MyApp />\n    </RecoilRoot>\n  );\n}", "example": "RecoilRoot"},
    {"id": "rec03", "type": "atom", "name": "Create Atom", "description": "Basic atom", "pattern": "import { atom } from 'recoil';\n\nexport const countState = atom({\n  key: 'countState',  // Unique ID\n  default: 0\n});", "example": "Create atom"},
    {"id": "rec04", "type": "use", "name": "useRecoilState", "description": "Read and write", "pattern": "import { useRecoilState } from 'recoil';\n\nfunction Counter() {\n  const [count, setCount] = useRecoilState(countState);\n  return (\n    <button onClick={() => setCount(c => c + 1)}>\n      {count}\n    </button>\n  );\n}", "example": "useRecoilState"},
    {"id": "rec05", "type": "use", "name": "useRecoilValue", "description": "Read only", "pattern": "import { useRecoilValue } from 'recoil';\n\nfunction Display() {\n  const count = useRecoilValue(countState);\n  return <div>{count}</div>;\n}", "example": "useRecoilValue"},
    {"id": "rec06", "type": "use", "name": "useSetRecoilState", "description": "Write only", "pattern": "import { useSetRecoilState } from 'recoil';\n\nfunction Incrementer() {\n  const setCount = useSetRecoilState(countState);\n  return <button onClick={() => setCount(c => c + 1)}>+</button>;\n}", "example": "useSetRecoilState"},
    {"id": "rec07", "type": "selector", "name": "Create Selector", "description": "Derived state", "pattern": "import { selector } from 'recoil';\n\nexport const doubleCountState = selector({\n  key: 'doubleCountState',\n  get: ({ get }) => get(countState) * 2\n});", "example": "Selector"},
    {"id": "rec08", "type": "selector", "name": "Writable Selector", "description": "Bidirectional", "pattern": "const fahrenheitState = selector({\n  key: 'fahrenheitState',\n  get: ({ get }) => get(celsiusState) * 9/5 + 32,\n  set: ({ set }, newValue) => {\n    set(celsiusState, (newValue - 32) * 5/9);\n  }\n});", "example": "Writable selector"},
    {"id": "rec09", "type": "async", "name": "Async Selector", "description": "Async data", "pattern": "const userState = selector({\n  key: 'userState',\n  get: async ({ get }) => {\n    const id = get(userIdState);\n    const response = await fetch(`/api/users/${id}`);\n    return response.json();\n  }\n});", "example": "Async selector"},
    {"id": "rec10", "type": "suspense", "name": "Suspense", "description": "Loading state", "pattern": "<Suspense fallback={<Loading />}>\n  <UserProfile />\n</Suspense>\n\nfunction UserProfile() {\n  const user = useRecoilValue(userState);  // Suspends while loading\n  return <div>{user.name}</div>;\n}", "example": "Suspense"},
    {"id": "rec11", "type": "loadable", "name": "useRecoilValueLoadable", "description": "Handle loading", "pattern": "const userLoadable = useRecoilValueLoadable(userState);\n\nswitch (userLoadable.state) {\n  case 'hasValue': return <User user={userLoadable.contents} />;\n  case 'loading': return <Loading />;\n  case 'hasError': return <Error error={userLoadable.contents} />;\n}", "example": "Loadable"},
    {"id": "rec12", "type": "family", "name": "atomFamily", "description": "Parameterized atoms", "pattern": "import { atomFamily } from 'recoil';\n\nexport const todoState = atomFamily({\n  key: 'todoState',\n  default: (id) => ({ id, text: '', completed: false })\n});\n\n// Usage\nconst [todo, setTodo] = useRecoilState(todoState(todoId));", "example": "atomFamily"},
    {"id": "rec13", "type": "family", "name": "selectorFamily", "description": "Parameterized selectors", "pattern": "import { selectorFamily } from 'recoil';\n\nexport const userSelector = selectorFamily({\n  key: 'userSelector',\n  get: (userId) => async () => {\n    const response = await fetch(`/api/users/${userId}`);\n    return response.json();\n  }\n});", "example": "selectorFamily"},
    {"id": "rec14", "type": "default", "name": "Default Selector", "description": "Dynamic default", "pattern": "const countState = atom({\n  key: 'countState',\n  default: selector({\n    key: 'countDefault',\n    get: async () => {\n      const response = await fetch('/api/initial-count');\n      return response.json();\n    }\n  })\n});", "example": "Default selector"},
    {"id": "rec15", "type": "effect", "name": "Atom Effects", "description": "Side effects", "pattern": "const countState = atom({\n  key: 'countState',\n  default: 0,\n  effects: [\n    ({ onSet, setSelf }) => {\n      // Initialize from localStorage\n      const saved = localStorage.getItem('count');\n      if (saved) setSelf(JSON.parse(saved));\n      \n      // Save on change\n      onSet((newValue) => {\n        localStorage.setItem('count', JSON.stringify(newValue));\n      });\n    }\n  ]\n});", "example": "Effects"},
    {"id": "rec16", "type": "effect", "name": "Effect Cleanup", "description": "Cleanup function", "pattern": "effects: [\n  ({ onSet }) => {\n    const handler = (e) => console.log(e);\n    window.addEventListener('resize', handler);\n    \n    // Cleanup\n    return () => window.removeEventListener('resize', handler);\n  }\n]", "example": "Cleanup"},
    {"id": "rec17", "type": "reset", "name": "useResetRecoilState", "description": "Reset to default", "pattern": "import { useResetRecoilState } from 'recoil';\n\nfunction ResetButton() {\n  const resetCount = useResetRecoilState(countState);\n  return <button onClick={resetCount}>Reset</button>;\n}", "example": "Reset"},
    {"id": "rec18", "type": "callback", "name": "useRecoilCallback", "description": "Callbacks", "pattern": "import { useRecoilCallback } from 'recoil';\n\nconst logCount = useRecoilCallback(({ snapshot }) => async () => {\n  const count = await snapshot.getPromise(countState);\n  console.log('Count:', count);\n});", "example": "Callback"},
    {"id": "rec19", "type": "snapshot", "name": "Snapshot", "description": "State snapshot", "pattern": "const callback = useRecoilCallback(({ snapshot, set }) => async () => {\n  // Read state\n  const count = await snapshot.getPromise(countState);\n  \n  // Write state\n  set(countState, count + 1);\n});", "example": "Snapshot"},
    {"id": "rec20", "type": "transaction", "name": "useRecoilTransaction", "description": "Batch updates", "pattern": "import { useRecoilTransaction_UNSTABLE } from 'recoil';\n\nconst updateAll = useRecoilTransaction_UNSTABLE(({ set }) => (newValue) => {\n  set(stateA, newValue);\n  set(stateB, newValue * 2);\n  set(stateC, newValue * 3);\n});", "example": "Transaction"},
    {"id": "rec21", "type": "wait", "name": "waitForAll", "description": "Parallel selectors", "pattern": "import { waitForAll } from 'recoil';\n\nconst allUsersState = selector({\n  key: 'allUsersState',\n  get: ({ get }) => get(waitForAll([\n    userSelector(1),\n    userSelector(2),\n    userSelector(3)\n  ]))\n});", "example": "waitForAll"},
    {"id": "rec22", "type": "wait", "name": "waitForNone", "description": "Non-blocking", "pattern": "import { waitForNone } from 'recoil';\n\nconst loadables = useRecoilValue(waitForNone([\n  userSelector(1),\n  userSelector(2)\n]));\n\n// Each loadable resolves independently", "example": "waitForNone"},
    {"id": "rec23", "type": "wait", "name": "waitForAny", "description": "First resolved", "pattern": "import { waitForAny } from 'recoil';\n\nconst firstUser = useRecoilValue(waitForAny([\n  userSelector(1),\n  userSelector(2)\n]));", "example": "waitForAny"},
    {"id": "rec24", "type": "const", "name": "constSelector", "description": "Constant value", "pattern": "import { constSelector } from 'recoil';\n\nconst myConst = constSelector('constant value');\n// Useful for conditional selectors", "example": "constSelector"},
    {"id": "rec25", "type": "error", "name": "errorSelector", "description": "Error state", "pattern": "import { errorSelector } from 'recoil';\n\nconst errorState = errorSelector(new Error('Something went wrong'));\n// Throws error when accessed", "example": "errorSelector"},
    {"id": "rec26", "type": "devtools", "name": "DevTools", "description": "Debug tools", "pattern": "import { useRecoilSnapshot } from 'recoil';\n\nfunction DebugObserver() {\n  const snapshot = useRecoilSnapshot();\n  useEffect(() => {\n    for (const node of snapshot.getNodes_UNSTABLE()) {\n      console.log(node.key, snapshot.getLoadable(node));\n    }\n  }, [snapshot]);\n  return null;\n}", "example": "DevTools"},
    {"id": "rec27", "type": "typescript", "name": "TypeScript", "description": "Type safety", "pattern": "interface Todo {\n  id: number;\n  text: string;\n  completed: boolean;\n}\n\nconst todoState = atom<Todo[]>({\n  key: 'todoState',\n  default: []\n});", "example": "TypeScript"},
    {"id": "rec28", "type": "test", "name": "Testing", "description": "Test components", "pattern": "import { RecoilRoot } from 'recoil';\nimport { renderHook } from '@testing-library/react-hooks';\n\ntest('counter', () => {\n  const { result } = renderHook(() => useRecoilState(countState), {\n    wrapper: RecoilRoot\n  });\n  expect(result.current[0]).toBe(0);\n});", "example": "Testing"},
    {"id": "rec29", "type": "init", "name": "Initialize State", "description": "Initial values", "pattern": "<RecoilRoot\n  initializeState={({ set }) => {\n    set(countState, 10);\n    set(userState, { name: 'John' });\n  }}\n>\n  <App />\n</RecoilRoot>", "example": "Initialize"},
    {"id": "rec30", "type": "pattern", "name": "Best Practices", "description": "Patterns", "pattern": "// 1. Use unique, descriptive keys\n// 2. Colocate atoms with components\n// 3. Use selectors for derived data\n// 4. Use atom effects for persistence\n// 5. Handle async with Suspense or loadables", "example": "Best practices"}
  ]
}
