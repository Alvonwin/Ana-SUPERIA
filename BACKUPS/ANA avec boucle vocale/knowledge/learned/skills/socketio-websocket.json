{
  "category": "socketio-websocket",
  "version": "1.0.0",
  "generatedBy": "Claude (Opus 4.5)",
  "description": "Socket.IO WebSocket real-time patterns",
  "skills": [
    {"id": "sow01", "type": "setup", "name": "Install Socket.IO", "description": "NPM install", "pattern": "npm install socket.io socket.io-client", "example": "Install"},
    {"id": "sow02", "type": "server", "name": "HTTP Server", "description": "Basic server", "pattern": "import { createServer } from 'http';\nimport { Server } from 'socket.io';\n\nconst httpServer = createServer();\nconst io = new Server(httpServer, {\n  cors: { origin: '*' }\n});\n\nhttpServer.listen(3001);", "example": "Server"},
    {"id": "sow03", "type": "connection", "name": "Connection Event", "description": "Handle connections", "pattern": "io.on('connection', (socket) => {\n  console.log('Connected:', socket.id);\n  \n  socket.on('disconnect', (reason) => {\n    console.log('Disconnected:', reason);\n  });\n});", "example": "Connection"},
    {"id": "sow04", "type": "client", "name": "Client Setup", "description": "Connect client", "pattern": "import { io } from 'socket.io-client';\n\nconst socket = io('http://localhost:3001');\n\nsocket.on('connect', () => {\n  console.log('Connected:', socket.id);\n});", "example": "Client"},
    {"id": "sow05", "type": "emit", "name": "Emit Events", "description": "Send messages", "pattern": "// Client to server\nsocket.emit('chat', { message: 'Hello' });\n\n// Server to client\nio.emit('broadcast', { data: 'To all' });\n\n// To specific socket\nio.to(socketId).emit('private', { data: 'For you' });", "example": "Emit"},
    {"id": "sow06", "type": "listen", "name": "Listen Events", "description": "Receive messages", "pattern": "socket.on('chat', (data) => {\n  console.log('Received:', data);\n});\n\n// Once only\nsocket.once('init', (data) => {\n  console.log('Init data:', data);\n});", "example": "Listen"},
    {"id": "sow07", "type": "rooms", "name": "Rooms", "description": "Group sockets", "pattern": "// Join room\nsocket.join('room-123');\n\n// Leave room\nsocket.leave('room-123');\n\n// Emit to room\nio.to('room-123').emit('message', 'Hello room');\n\n// Broadcast to room (except sender)\nsocket.to('room-123').emit('message', 'From one member');", "example": "Rooms"},
    {"id": "sow08", "type": "namespace", "name": "Namespaces", "description": "Separate endpoints", "pattern": "// Server\nconst chat = io.of('/chat');\nchat.on('connection', (socket) => {\n  console.log('Chat connected');\n});\n\n// Client\nconst chatSocket = io('/chat');", "example": "Namespace"},
    {"id": "sow09", "type": "ack", "name": "Acknowledgments", "description": "Confirm receipt", "pattern": "// Client sends with callback\nsocket.emit('save', data, (response) => {\n  console.log('Saved:', response);\n});\n\n// Server acknowledges\nsocket.on('save', (data, callback) => {\n  saveData(data);\n  callback({ success: true });\n});", "example": "Ack"},
    {"id": "sow10", "type": "middleware", "name": "Middleware", "description": "Auth middleware", "pattern": "io.use((socket, next) => {\n  const token = socket.handshake.auth.token;\n  try {\n    const user = verifyToken(token);\n    socket.data.user = user;\n    next();\n  } catch (err) {\n    next(new Error('Unauthorized'));\n  }\n});", "example": "Middleware"},
    {"id": "sow11", "type": "broadcast", "name": "Broadcasting", "description": "Broadcast patterns", "pattern": "// To all connected clients\nio.emit('alert', 'Server message');\n\n// To all except sender\nsocket.broadcast.emit('user-joined', socket.id);\n\n// To multiple rooms\nio.to('room1').to('room2').emit('message', 'Multi-room');", "example": "Broadcast"},
    {"id": "sow12", "type": "volatile", "name": "Volatile Events", "description": "Lossy delivery", "pattern": "// May drop if client not ready\nsocket.volatile.emit('cursor', { x: 100, y: 200 });\n\n// Good for real-time position updates\nio.volatile.emit('gameState', state);", "example": "Volatile"},
    {"id": "sow13", "type": "binary", "name": "Binary Data", "description": "Send buffers", "pattern": "// Send file\nconst buffer = fs.readFileSync('image.png');\nsocket.emit('file', buffer);\n\n// Receive\nsocket.on('file', (data) => {\n  fs.writeFileSync('received.png', data);\n});", "example": "Binary"},
    {"id": "sow14", "type": "timeout", "name": "Timeouts", "description": "Request timeout", "pattern": "socket.timeout(5000).emit('request', data, (err, response) => {\n  if (err) {\n    console.log('Timed out');\n  } else {\n    console.log('Response:', response);\n  }\n});", "example": "Timeout"},
    {"id": "sow15", "type": "reconnect", "name": "Reconnection", "description": "Auto reconnect", "pattern": "const socket = io('http://localhost:3001', {\n  reconnection: true,\n  reconnectionAttempts: 5,\n  reconnectionDelay: 1000,\n  reconnectionDelayMax: 5000\n});\n\nsocket.on('reconnect', (attempt) => {\n  console.log('Reconnected after', attempt, 'attempts');\n});", "example": "Reconnect"},
    {"id": "sow16", "type": "disconnect", "name": "Disconnect Handling", "description": "Handle disconnect", "pattern": "socket.on('disconnect', (reason) => {\n  // 'io server disconnect' - server disconnected\n  // 'io client disconnect' - client called disconnect()\n  // 'ping timeout' - no ping response\n  // 'transport close' - connection closed\n  console.log('Reason:', reason);\n});", "example": "Disconnect"},
    {"id": "sow17", "type": "error", "name": "Error Handling", "description": "Handle errors", "pattern": "socket.on('connect_error', (err) => {\n  console.log('Connection error:', err.message);\n});\n\nio.on('connection', (socket) => {\n  socket.on('error', (err) => {\n    console.log('Socket error:', err);\n  });\n});", "example": "Error"},
    {"id": "sow18", "type": "redis", "name": "Redis Adapter", "description": "Scale horizontally", "pattern": "import { createAdapter } from '@socket.io/redis-adapter';\nimport { createClient } from 'redis';\n\nconst pubClient = createClient({ url: 'redis://localhost:6379' });\nconst subClient = pubClient.duplicate();\n\nawait pubClient.connect();\nawait subClient.connect();\n\nio.adapter(createAdapter(pubClient, subClient));", "example": "Redis"},
    {"id": "sow19", "type": "presence", "name": "User Presence", "description": "Online status", "pattern": "const users = new Map();\n\nio.on('connection', (socket) => {\n  const userId = socket.data.user.id;\n  users.set(userId, socket.id);\n  io.emit('online', Array.from(users.keys()));\n  \n  socket.on('disconnect', () => {\n    users.delete(userId);\n    io.emit('online', Array.from(users.keys()));\n  });\n});", "example": "Presence"},
    {"id": "sow20", "type": "typing", "name": "Typing Indicator", "description": "Show typing", "pattern": "// Client\nlet timeout;\ninput.addEventListener('input', () => {\n  socket.emit('typing', { room, typing: true });\n  clearTimeout(timeout);\n  timeout = setTimeout(() => {\n    socket.emit('typing', { room, typing: false });\n  }, 1000);\n});\n\n// Display\nsocket.on('typing', ({ userId, typing }) => {\n  showTyping(userId, typing);\n});", "example": "Typing"},
    {"id": "sow21", "type": "chat", "name": "Chat Implementation", "description": "Chat room", "pattern": "io.on('connection', (socket) => {\n  socket.on('join', (room) => {\n    socket.join(room);\n    socket.to(room).emit('joined', socket.data.user.name);\n  });\n  \n  socket.on('message', ({ room, text }) => {\n    io.to(room).emit('message', {\n      user: socket.data.user.name,\n      text,\n      time: Date.now()\n    });\n  });\n});", "example": "Chat"},
    {"id": "sow22", "type": "cursor", "name": "Cursor Sync", "description": "Collaborative cursor", "pattern": "// Client\ndocument.addEventListener('mousemove', (e) => {\n  socket.volatile.emit('cursor', {\n    x: e.clientX,\n    y: e.clientY\n  });\n});\n\n// Server\nsocket.on('cursor', (pos) => {\n  socket.to(room).emit('cursor', {\n    id: socket.id,\n    ...pos\n  });\n});", "example": "Cursor"},
    {"id": "sow23", "type": "game", "name": "Game Loop", "description": "Game state sync", "pattern": "let state = { players: {}, objects: [] };\n\n// Update loop\nsetInterval(() => {\n  updateState();\n  io.volatile.emit('state', state);\n}, 1000 / 60);\n\nsocket.on('input', (input) => {\n  handleInput(socket.id, input);\n});", "example": "Game"},
    {"id": "sow24", "type": "admin", "name": "Admin UI", "description": "Monitoring", "pattern": "import { instrument } from '@socket.io/admin-ui';\n\ninstrument(io, {\n  auth: {\n    type: 'basic',\n    username: 'admin',\n    password: bcrypt.hashSync('secret', 10)\n  }\n});", "example": "Admin"},
    {"id": "sow25", "type": "cors", "name": "CORS Config", "description": "Cross-origin", "pattern": "const io = new Server(httpServer, {\n  cors: {\n    origin: ['http://localhost:3000', 'https://app.example.com'],\n    methods: ['GET', 'POST'],\n    credentials: true\n  }\n});", "example": "CORS"},
    {"id": "sow26", "type": "react", "name": "React Integration", "description": "useSocket hook", "pattern": "import { useEffect, useState } from 'react';\nimport { io } from 'socket.io-client';\n\nexport function useSocket(url) {\n  const [socket, setSocket] = useState(null);\n  \n  useEffect(() => {\n    const s = io(url);\n    setSocket(s);\n    return () => s.close();\n  }, [url]);\n  \n  return socket;\n}", "example": "React"},
    {"id": "sow27", "type": "typescript", "name": "TypeScript", "description": "Type definitions", "pattern": "import { Server, Socket } from 'socket.io';\n\ninterface ServerToClient {\n  message: (data: { text: string }) => void;\n}\n\ninterface ClientToServer {\n  send: (data: { text: string }) => void;\n}\n\nconst io = new Server<ClientToServer, ServerToClient>();", "example": "TypeScript"},
    {"id": "sow28", "type": "test", "name": "Testing", "description": "Test sockets", "pattern": "import { createServer } from 'http';\nimport { Server } from 'socket.io';\nimport Client from 'socket.io-client';\n\ntest('should emit message', (done) => {\n  const httpServer = createServer();\n  const io = new Server(httpServer);\n  \n  httpServer.listen(() => {\n    const client = Client(`http://localhost:${httpServer.address().port}`);\n    client.on('message', (data) => {\n      expect(data).toBe('hello');\n      done();\n    });\n  });\n});", "example": "Testing"},
    {"id": "sow29", "type": "sticky", "name": "Sticky Sessions", "description": "Load balancing", "pattern": "// Nginx config\nupstream socket_nodes {\n  ip_hash;\n  server node1:3001;\n  server node2:3001;\n}\n\nserver {\n  location /socket.io/ {\n    proxy_pass http://socket_nodes;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n  }\n}", "example": "Sticky"},
    {"id": "sow30", "type": "pattern", "name": "Best Practices", "description": "Patterns", "pattern": "// 1. Use rooms for grouping\n// 2. Implement authentication middleware\n// 3. Use volatile for real-time updates\n// 4. Handle reconnection gracefully\n// 5. Use Redis adapter for scaling", "example": "Patterns"}
  ]
}
