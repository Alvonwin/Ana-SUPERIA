{
  "category": "sqlite-database",
  "version": "1.0.0",
  "generatedBy": "Claude (Opus 4.5)",
  "description": "SQLite embedded database patterns",
  "skills": [
    {"id": "sqt01", "type": "setup", "name": "Install better-sqlite3", "description": "NPM install", "pattern": "npm install better-sqlite3", "example": "NPM install"},
    {"id": "sqt02", "type": "setup", "name": "Install sql.js", "description": "Browser/WASM", "pattern": "npm install sql.js", "example": "sql.js install"},
    {"id": "sqt03", "type": "connect", "name": "Open Database", "description": "Create connection", "pattern": "const Database = require('better-sqlite3');\nconst db = new Database('mydb.sqlite');", "example": "Open DB"},
    {"id": "sqt04", "type": "connect", "name": "In-Memory DB", "description": "Memory database", "pattern": "const db = new Database(':memory:');", "example": "Memory DB"},
    {"id": "sqt05", "type": "table", "name": "CREATE TABLE", "description": "Define table", "pattern": "db.exec(`CREATE TABLE IF NOT EXISTS users (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  name TEXT NOT NULL,\n  email TEXT UNIQUE,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)`);", "example": "Create table"},
    {"id": "sqt06", "type": "type", "name": "Data Types", "description": "SQLite types", "pattern": "NULL, INTEGER, REAL, TEXT, BLOB", "example": "Data types"},
    {"id": "sqt07", "type": "crud", "name": "INSERT", "description": "Insert row", "pattern": "const stmt = db.prepare('INSERT INTO users (name, email) VALUES (?, ?)');\nconst result = stmt.run('John', 'john@example.com');", "example": "Insert"},
    {"id": "sqt08", "type": "crud", "name": "SELECT", "description": "Query rows", "pattern": "const rows = db.prepare('SELECT * FROM users WHERE age > ?').all(18);\nconst user = db.prepare('SELECT * FROM users WHERE id = ?').get(1);", "example": "Select"},
    {"id": "sqt09", "type": "crud", "name": "UPDATE", "description": "Update row", "pattern": "db.prepare('UPDATE users SET name = ? WHERE id = ?').run('Jane', 1);", "example": "Update"},
    {"id": "sqt10", "type": "crud", "name": "DELETE", "description": "Delete row", "pattern": "db.prepare('DELETE FROM users WHERE id = ?').run(1);", "example": "Delete"},
    {"id": "sqt11", "type": "statement", "name": "Prepared Statement", "description": "Prepare once", "pattern": "const insert = db.prepare('INSERT INTO users (name) VALUES (?)');\ninsert.run('John');\ninsert.run('Jane');", "example": "Prepared"},
    {"id": "sqt12", "type": "statement", "name": "Named Parameters", "description": "Named params", "pattern": "const stmt = db.prepare('SELECT * FROM users WHERE name = @name AND age > @age');\nstmt.all({ name: 'John', age: 18 });", "example": "Named params"},
    {"id": "sqt13", "type": "transaction", "name": "Transaction", "description": "ACID transaction", "pattern": "const insertMany = db.transaction((users) => {\n  for (const user of users) insert.run(user);\n});\ninsertMany([{ name: 'A' }, { name: 'B' }]);", "example": "Transaction"},
    {"id": "sqt14", "type": "transaction", "name": "Savepoints", "description": "Nested transaction", "pattern": "const outer = db.transaction(() => {\n  // outer transaction\n  const inner = db.transaction(() => { /* inner */ });\n  inner();\n});", "example": "Savepoints"},
    {"id": "sqt15", "type": "index", "name": "Index", "description": "Create index", "pattern": "db.exec('CREATE INDEX idx_users_email ON users(email)');\ndb.exec('CREATE UNIQUE INDEX idx_users_unique_email ON users(email)');", "example": "Index"},
    {"id": "sqt16", "type": "aggregate", "name": "Aggregations", "description": "Aggregate functions", "pattern": "db.prepare('SELECT COUNT(*), AVG(age), MAX(age) FROM users').get();", "example": "Aggregations"},
    {"id": "sqt17", "type": "json", "name": "JSON Functions", "description": "JSON support", "pattern": "db.exec(`CREATE TABLE events (id INTEGER PRIMARY KEY, data JSON)`);\ndb.prepare(`SELECT json_extract(data, '$.name') FROM events`).all();", "example": "JSON"},
    {"id": "sqt18", "type": "fts", "name": "Full-Text Search", "description": "FTS5", "pattern": "db.exec(`CREATE VIRTUAL TABLE posts_fts USING fts5(title, content)`);\ndb.prepare(`SELECT * FROM posts_fts WHERE posts_fts MATCH 'search term'`).all();", "example": "FTS5"},
    {"id": "sqt19", "type": "pragma", "name": "PRAGMA", "description": "Database settings", "pattern": "db.pragma('journal_mode = WAL');\ndb.pragma('foreign_keys = ON');\nconst tables = db.pragma('table_list');", "example": "PRAGMA"},
    {"id": "sqt20", "type": "wal", "name": "WAL Mode", "description": "Write-ahead log", "pattern": "db.pragma('journal_mode = WAL'); // Better concurrency", "example": "WAL mode"},
    {"id": "sqt21", "type": "function", "name": "User Functions", "description": "Custom functions", "pattern": "db.function('double', (x) => x * 2);\ndb.prepare('SELECT double(age) FROM users').all();", "example": "User function"},
    {"id": "sqt22", "type": "aggregate", "name": "User Aggregate", "description": "Custom aggregate", "pattern": "db.aggregate('sum_double', {\n  start: 0,\n  step: (total, value) => total + value * 2,\n  result: (total) => total\n});", "example": "User aggregate"},
    {"id": "sqt23", "type": "backup", "name": "Backup", "description": "Database backup", "pattern": "await db.backup('backup.sqlite');\n// Or: db.exec('VACUUM INTO \"backup.sqlite\"');", "example": "Backup"},
    {"id": "sqt24", "type": "iterator", "name": "Iterate Results", "description": "Lazy iteration", "pattern": "for (const row of db.prepare('SELECT * FROM users').iterate()) {\n  console.log(row.name);\n}", "example": "Iterator"},
    {"id": "sqt25", "type": "expand", "name": "Expand Columns", "description": "Get columns", "pattern": "const stmt = db.prepare('SELECT * FROM users');\nconsole.log(stmt.columns()); // column metadata", "example": "Columns"},
    {"id": "sqt26", "type": "raw", "name": "Raw Mode", "description": "Array results", "pattern": "const rows = db.prepare('SELECT * FROM users').raw().all();\n// Returns arrays instead of objects", "example": "Raw mode"},
    {"id": "sqt27", "type": "attach", "name": "Attach Database", "description": "Multiple DBs", "pattern": "db.exec(`ATTACH DATABASE 'other.sqlite' AS other`);\ndb.prepare('SELECT * FROM other.users').all();", "example": "Attach"},
    {"id": "sqt28", "type": "trigger", "name": "Triggers", "description": "Event trigger", "pattern": "db.exec(`CREATE TRIGGER update_timestamp\nAFTER UPDATE ON users\nBEGIN UPDATE users SET updated_at = CURRENT_TIMESTAMP WHERE id = NEW.id; END`);", "example": "Trigger"},
    {"id": "sqt29", "type": "view", "name": "Views", "description": "Create view", "pattern": "db.exec('CREATE VIEW active_users AS SELECT * FROM users WHERE active = 1');", "example": "View"},
    {"id": "sqt30", "type": "close", "name": "Close Database", "description": "Close connection", "pattern": "db.close();", "example": "Close"}
  ]
}
