{
  "category": "apolloclient-react",
  "version": "1.0.0",
  "generatedBy": "Claude (Opus 4.5)",
  "description": "Apollo Client React integration patterns",
  "skills": [
    {"id": "acr01", "type": "setup", "name": "Install Apollo", "description": "NPM install", "pattern": "npm install @apollo/client graphql", "example": "Install"},
    {"id": "acr02", "type": "client", "name": "Create Client", "description": "Setup client", "pattern": "import { ApolloClient, InMemoryCache } from '@apollo/client';\n\nconst client = new ApolloClient({\n  uri: 'http://localhost:4000/graphql',\n  cache: new InMemoryCache()\n});", "example": "Client"},
    {"id": "acr03", "type": "provider", "name": "Provider Setup", "description": "React provider", "pattern": "import { ApolloProvider } from '@apollo/client';\n\nfunction App() {\n  return (\n    <ApolloProvider client={client}>\n      <Router>\n        <Routes />\n      </Router>\n    </ApolloProvider>\n  );\n}", "example": "Provider"},
    {"id": "acr04", "type": "useQuery", "name": "useQuery Hook", "description": "Fetch data", "pattern": "import { useQuery, gql } from '@apollo/client';\n\nconst GET_USERS = gql`query { users { id name } }`;\n\nfunction Users() {\n  const { loading, error, data } = useQuery(GET_USERS);\n  \n  if (loading) return <p>Loading...</p>;\n  if (error) return <p>Error</p>;\n  \n  return data.users.map(u => <div key={u.id}>{u.name}</div>);\n}", "example": "useQuery"},
    {"id": "acr05", "type": "variables", "name": "Query Variables", "description": "Pass parameters", "pattern": "const GET_USER = gql`\n  query GetUser($id: ID!) {\n    user(id: $id) { name email }\n  }\n`;\n\nfunction User({ id }) {\n  const { data } = useQuery(GET_USER, {\n    variables: { id },\n    skip: !id\n  });\n  return <div>{data?.user?.name}</div>;\n}", "example": "Variables"},
    {"id": "acr06", "type": "useMutation", "name": "useMutation Hook", "description": "Modify data", "pattern": "const CREATE_USER = gql`\n  mutation($input: UserInput!) {\n    createUser(input: $input) { id name }\n  }\n`;\n\nfunction CreateUser() {\n  const [create, { loading }] = useMutation(CREATE_USER);\n  \n  const submit = (data) => {\n    create({ variables: { input: data } });\n  };\n}", "example": "useMutation"},
    {"id": "acr07", "type": "useLazyQuery", "name": "Lazy Query", "description": "Manual execution", "pattern": "import { useLazyQuery } from '@apollo/client';\n\nfunction Search() {\n  const [search, { data }] = useLazyQuery(SEARCH);\n  \n  return (\n    <button onClick={() => search({ variables: { q: 'test' } })}>\n      Search\n    </button>\n  );\n}", "example": "LazyQuery"},
    {"id": "acr08", "type": "refetch", "name": "Refetch Data", "description": "Manual refresh", "pattern": "const { data, refetch } = useQuery(GET_DATA);\n\n// Refetch same query\nrefetch();\n\n// Refetch with new variables\nrefetch({ id: newId });", "example": "Refetch"},
    {"id": "acr09", "type": "polling", "name": "Polling", "description": "Auto refresh", "pattern": "const { data } = useQuery(GET_DATA, {\n  pollInterval: 5000,  // Every 5 seconds\n});\n\n// Manual control\nconst { startPolling, stopPolling } = useQuery(GET_DATA);\nstartPolling(1000);\nstopPolling();", "example": "Polling"},
    {"id": "acr10", "type": "fetchPolicy", "name": "Fetch Policies", "description": "Cache strategy", "pattern": "useQuery(GET_DATA, {\n  fetchPolicy: 'cache-first',       // Default\n  // 'cache-only'    - Only cache\n  // 'network-only'  - Always network\n  // 'cache-and-network' - Both\n  // 'no-cache'      - No caching\n});", "example": "FetchPolicy"},
    {"id": "acr11", "type": "updateCache", "name": "Update Cache", "description": "Cache modification", "pattern": "const [addItem] = useMutation(ADD_ITEM, {\n  update(cache, { data }) {\n    const existing = cache.readQuery({ query: GET_ITEMS });\n    cache.writeQuery({\n      query: GET_ITEMS,\n      data: { items: [...existing.items, data.addItem] }\n    });\n  }\n});", "example": "UpdateCache"},
    {"id": "acr12", "type": "optimistic", "name": "Optimistic UI", "description": "Instant update", "pattern": "const [addItem] = useMutation(ADD_ITEM, {\n  optimisticResponse: {\n    addItem: {\n      __typename: 'Item',\n      id: 'temp-id',\n      name: inputValue\n    }\n  },\n  update(cache, { data }) {\n    // Same update logic\n  }\n});", "example": "Optimistic"},
    {"id": "acr13", "type": "refetchQueries", "name": "Refetch After Mutation", "description": "Auto refetch", "pattern": "const [deleteItem] = useMutation(DELETE_ITEM, {\n  refetchQueries: [\n    { query: GET_ITEMS },\n    'GetItems'  // By name\n  ],\n  awaitRefetchQueries: true\n});", "example": "RefetchQueries"},
    {"id": "acr14", "type": "fragments", "name": "Fragments", "description": "Reusable fields", "pattern": "const USER_FIELDS = gql`\n  fragment UserFields on User {\n    id\n    name\n    email\n  }\n`;\n\nconst GET_USER = gql`\n  ${USER_FIELDS}\n  query GetUser($id: ID!) {\n    user(id: $id) {\n      ...UserFields\n    }\n  }\n`;", "example": "Fragments"},
    {"id": "acr15", "type": "errorHandling", "name": "Error Handling", "description": "Handle errors", "pattern": "const { error } = useQuery(GET_DATA, {\n  errorPolicy: 'all',\n  onError: (error) => {\n    console.error(error.message);\n  }\n});\n\nif (error?.graphQLErrors) {\n  error.graphQLErrors.forEach(e => {\n    console.log(e.message, e.extensions.code);\n  });\n}", "example": "Error"},
    {"id": "acr16", "type": "useSubscription", "name": "Subscriptions", "description": "Real-time data", "pattern": "import { useSubscription } from '@apollo/client';\n\nconst MESSAGE_SUB = gql`\n  subscription { messageAdded { id content } }\n`;\n\nfunction Chat() {\n  const { data } = useSubscription(MESSAGE_SUB);\n  \n  useEffect(() => {\n    if (data) addMessage(data.messageAdded);\n  }, [data]);\n}", "example": "Subscription"},
    {"id": "acr17", "type": "authLink", "name": "Auth Link", "description": "Add auth header", "pattern": "import { setContext } from '@apollo/client/link/context';\n\nconst authLink = setContext((_, { headers }) => ({\n  headers: {\n    ...headers,\n    authorization: `Bearer ${getToken()}`\n  }\n}));\n\nconst client = new ApolloClient({\n  link: authLink.concat(httpLink),\n  cache: new InMemoryCache()\n});", "example": "AuthLink"},
    {"id": "acr18", "type": "errorLink", "name": "Error Link", "description": "Global error handling", "pattern": "import { onError } from '@apollo/client/link/error';\n\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\n  if (graphQLErrors) {\n    graphQLErrors.forEach(({ message, extensions }) => {\n      if (extensions.code === 'UNAUTHENTICATED') {\n        logout();\n      }\n    });\n  }\n});", "example": "ErrorLink"},
    {"id": "acr19", "type": "pagination", "name": "Pagination", "description": "Load more", "pattern": "const { data, fetchMore } = useQuery(GET_ITEMS, {\n  variables: { offset: 0, limit: 10 }\n});\n\nconst loadMore = () => {\n  fetchMore({\n    variables: { offset: data.items.length },\n    updateQuery: (prev, { fetchMoreResult }) => ({\n      items: [...prev.items, ...fetchMoreResult.items]\n    })\n  });\n};", "example": "Pagination"},
    {"id": "acr20", "type": "typePolicy", "name": "Type Policies", "description": "Cache config", "pattern": "const cache = new InMemoryCache({\n  typePolicies: {\n    Query: {\n      fields: {\n        items: {\n          merge(existing = [], incoming) {\n            return [...existing, ...incoming];\n          }\n        }\n      }\n    }\n  }\n});", "example": "TypePolicy"},
    {"id": "acr21", "type": "reactiveVars", "name": "Reactive Variables", "description": "Local state", "pattern": "import { makeVar, useReactiveVar } from '@apollo/client';\n\nconst cartVar = makeVar([]);\n\nfunction Cart() {\n  const items = useReactiveVar(cartVar);\n  return <div>{items.length} items</div>;\n}\n\n// Update\ncartVar([...cartVar(), newItem]);", "example": "ReactiveVars"},
    {"id": "acr22", "type": "localState", "name": "Local-Only Fields", "description": "Client fields", "pattern": "const GET_DATA = gql`\n  query GetData {\n    items @client {\n      id\n      name\n    }\n  }\n`;\n\nconst cache = new InMemoryCache();\ncache.writeQuery({\n  query: GET_DATA,\n  data: { items: [] }\n});", "example": "LocalState"},
    {"id": "acr23", "type": "wsLink", "name": "WebSocket Link", "description": "Subscriptions setup", "pattern": "import { GraphQLWsLink } from '@apollo/client/link/subscriptions';\nimport { createClient } from 'graphql-ws';\nimport { split, HttpLink } from '@apollo/client';\nimport { getMainDefinition } from '@apollo/client/utilities';\n\nconst wsLink = new GraphQLWsLink(createClient({ url: 'ws://localhost:4000/graphql' }));\n\nconst splitLink = split(\n  ({ query }) => {\n    const def = getMainDefinition(query);\n    return def.kind === 'OperationDefinition' && def.operation === 'subscription';\n  },\n  wsLink,\n  httpLink\n);", "example": "WSLink"},
    {"id": "acr24", "type": "batchLink", "name": "Batch Link", "description": "Batch requests", "pattern": "import { BatchHttpLink } from '@apollo/client/link/batch-http';\n\nconst batchLink = new BatchHttpLink({\n  uri: '/graphql',\n  batchMax: 10,\n  batchInterval: 20\n});", "example": "BatchLink"},
    {"id": "acr25", "type": "persist", "name": "Cache Persistence", "description": "Persist to storage", "pattern": "import { persistCache, LocalStorageWrapper } from 'apollo3-cache-persist';\n\nconst cache = new InMemoryCache();\n\nawait persistCache({\n  cache,\n  storage: new LocalStorageWrapper(window.localStorage)\n});", "example": "Persist"},
    {"id": "acr26", "type": "devtools", "name": "Apollo DevTools", "description": "Browser extension", "pattern": "const client = new ApolloClient({\n  uri: '/graphql',\n  cache: new InMemoryCache(),\n  connectToDevTools: process.env.NODE_ENV === 'development'\n});\n\n// Install Apollo Client DevTools browser extension", "example": "DevTools"},
    {"id": "acr27", "type": "networkStatus", "name": "Network Status", "description": "Loading states", "pattern": "import { NetworkStatus } from '@apollo/client';\n\nconst { data, networkStatus } = useQuery(GET_DATA, {\n  notifyOnNetworkStatusChange: true\n});\n\nif (networkStatus === NetworkStatus.refetch) {\n  return <p>Refetching...</p>;\n}", "example": "NetworkStatus"},
    {"id": "acr28", "type": "typescript", "name": "TypeScript", "description": "Type generation", "pattern": "// With graphql-codegen\nimport { useGetUsersQuery } from './generated/graphql';\n\nfunction Users() {\n  const { data } = useGetUsersQuery();\n  // data is fully typed!\n  return data?.users.map(u => <div>{u.name}</div>);\n}", "example": "TypeScript"},
    {"id": "acr29", "type": "testing", "name": "Testing", "description": "Mock provider", "pattern": "import { MockedProvider } from '@apollo/client/testing';\n\nconst mocks = [{\n  request: { query: GET_USER, variables: { id: '1' } },\n  result: { data: { user: { id: '1', name: 'John' } } }\n}];\n\nrender(\n  <MockedProvider mocks={mocks}>\n    <UserProfile id=\"1\" />\n  </MockedProvider>\n);", "example": "Testing"},
    {"id": "acr30", "type": "pattern", "name": "Best Practices", "description": "Patterns", "pattern": "// 1. Use fragments for reusable fields\n// 2. Configure type policies for pagination\n// 3. Use optimistic responses for UX\n// 4. Generate types with codegen\n// 5. Handle errors globally with errorLink", "example": "Patterns"}
  ]
}
