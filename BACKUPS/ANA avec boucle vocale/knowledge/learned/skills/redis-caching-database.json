{
  "category": "redis-caching-database",
  "version": "1.0.0",
  "generatedBy": "Claude (Opus 4.5)",
  "description": "Redis caching and data store patterns",
  "skills": [
    {"id": "rds01", "type": "setup", "name": "Install Redis Client", "description": "NPM install", "pattern": "npm install redis\n// or\nnpm install ioredis", "example": "Install"},
    {"id": "rds02", "type": "connect", "name": "Connect", "description": "Create connection", "pattern": "import { createClient } from 'redis';\n\nconst client = createClient({\n  url: 'redis://localhost:6379'\n});\n\nclient.on('error', err => console.log('Redis Error', err));\n\nawait client.connect();", "example": "Connect"},
    {"id": "rds03", "type": "ioredis", "name": "IORedis", "description": "IORedis client", "pattern": "import Redis from 'ioredis';\n\nconst redis = new Redis({\n  host: 'localhost',\n  port: 6379,\n  password: 'secret',\n  db: 0\n});", "example": "IORedis"},
    {"id": "rds04", "type": "strings", "name": "Strings", "description": "Basic key-value", "pattern": "// Set value\nawait client.set('key', 'value');\n\n// Get value\nconst value = await client.get('key');\n\n// Set with expiration (seconds)\nawait client.setEx('session', 3600, 'data');\n\n// Set only if not exists\nawait client.setNX('lock', '1');", "example": "Strings"},
    {"id": "rds05", "type": "json", "name": "JSON Data", "description": "Store objects", "pattern": "const user = { id: 1, name: 'John', email: 'john@example.com' };\n\n// Store\nawait client.set('user:1', JSON.stringify(user));\n\n// Retrieve\nconst data = await client.get('user:1');\nconst parsed = JSON.parse(data);", "example": "JSON"},
    {"id": "rds06", "type": "hash", "name": "Hashes", "description": "Hash operations", "pattern": "// Set hash fields\nawait client.hSet('user:1', {\n  name: 'John',\n  email: 'john@example.com',\n  age: '30'\n});\n\n// Get single field\nconst name = await client.hGet('user:1', 'name');\n\n// Get all fields\nconst user = await client.hGetAll('user:1');", "example": "Hash"},
    {"id": "rds07", "type": "list", "name": "Lists", "description": "List operations", "pattern": "// Push to list\nawait client.lPush('queue', 'item1');\nawait client.rPush('queue', 'item2');\n\n// Pop from list\nconst item = await client.lPop('queue');\n\n// Get range\nconst items = await client.lRange('queue', 0, -1);", "example": "List"},
    {"id": "rds08", "type": "set", "name": "Sets", "description": "Set operations", "pattern": "// Add to set\nawait client.sAdd('tags', 'javascript', 'nodejs', 'redis');\n\n// Check membership\nconst isMember = await client.sIsMember('tags', 'javascript');\n\n// Get all members\nconst members = await client.sMembers('tags');\n\n// Set operations\nconst union = await client.sUnion('set1', 'set2');", "example": "Set"},
    {"id": "rds09", "type": "sortedset", "name": "Sorted Sets", "description": "Sorted set operations", "pattern": "// Add with scores\nawait client.zAdd('leaderboard', [\n  { score: 100, value: 'player1' },\n  { score: 200, value: 'player2' }\n]);\n\n// Get top players\nconst top = await client.zRange('leaderboard', 0, 9, { REV: true });\n\n// Get rank\nconst rank = await client.zRank('leaderboard', 'player1');", "example": "Sorted"},
    {"id": "rds10", "type": "expire", "name": "Expiration", "description": "TTL management", "pattern": "// Set expiration\nawait client.expire('key', 3600);  // 1 hour\n\n// Set at specific time\nawait client.expireAt('key', Math.floor(Date.now() / 1000) + 3600);\n\n// Check TTL\nconst ttl = await client.ttl('key');\n\n// Remove expiration\nawait client.persist('key');", "example": "Expire"},
    {"id": "rds11", "type": "delete", "name": "Delete", "description": "Remove keys", "pattern": "// Delete single key\nawait client.del('key');\n\n// Delete multiple keys\nawait client.del(['key1', 'key2', 'key3']);\n\n// Check if exists\nconst exists = await client.exists('key');", "example": "Delete"},
    {"id": "rds12", "type": "increment", "name": "Increment", "description": "Atomic counters", "pattern": "// Increment by 1\nawait client.incr('visits');\n\n// Increment by N\nawait client.incrBy('visits', 10);\n\n// Decrement\nawait client.decr('stock');\n\n// Float increment\nawait client.incrByFloat('balance', 10.50);", "example": "Increment"},
    {"id": "rds13", "type": "pub", "name": "Publish", "description": "Pub/Sub publish", "pattern": "// Publish message\nawait client.publish('notifications', JSON.stringify({\n  type: 'alert',\n  message: 'New notification'\n}));", "example": "Publish"},
    {"id": "rds14", "type": "sub", "name": "Subscribe", "description": "Pub/Sub subscribe", "pattern": "const subscriber = client.duplicate();\nawait subscriber.connect();\n\nawait subscriber.subscribe('notifications', (message) => {\n  const data = JSON.parse(message);\n  console.log('Received:', data);\n});\n\n// Pattern subscribe\nawait subscriber.pSubscribe('user:*', (message, channel) => {\n  console.log(`${channel}: ${message}`);\n});", "example": "Subscribe"},
    {"id": "rds15", "type": "transaction", "name": "Transactions", "description": "Multi/Exec", "pattern": "const multi = client.multi();\n\nmulti.set('key1', 'value1');\nmulti.set('key2', 'value2');\nmulti.incr('counter');\n\nconst results = await multi.exec();", "example": "Transaction"},
    {"id": "rds16", "type": "pipeline", "name": "Pipeline", "description": "Batch commands", "pattern": "// IORedis pipeline\nconst pipeline = redis.pipeline();\n\npipeline.set('key1', 'value1');\npipeline.set('key2', 'value2');\npipeline.get('key1');\n\nconst results = await pipeline.exec();", "example": "Pipeline"},
    {"id": "rds17", "type": "scan", "name": "Scan", "description": "Iterate keys", "pattern": "// Scan all keys\nfor await (const key of client.scanIterator({\n  MATCH: 'user:*',\n  COUNT: 100\n})) {\n  console.log(key);\n}\n\n// Hash scan\nfor await (const entry of client.hScanIterator('hash')) {\n  console.log(entry.field, entry.value);\n}", "example": "Scan"},
    {"id": "rds18", "type": "cache", "name": "Cache Pattern", "description": "Cache-aside", "pattern": "async function getUser(id) {\n  const cacheKey = `user:${id}`;\n  \n  // Try cache first\n  const cached = await client.get(cacheKey);\n  if (cached) return JSON.parse(cached);\n  \n  // Fetch from database\n  const user = await db.users.findById(id);\n  \n  // Cache for 1 hour\n  await client.setEx(cacheKey, 3600, JSON.stringify(user));\n  \n  return user;\n}", "example": "Cache"},
    {"id": "rds19", "type": "lock", "name": "Distributed Lock", "description": "Locking pattern", "pattern": "async function acquireLock(lockKey, ttl = 10) {\n  const lockId = crypto.randomUUID();\n  const acquired = await client.set(lockKey, lockId, {\n    NX: true,\n    EX: ttl\n  });\n  return acquired ? lockId : null;\n}\n\nasync function releaseLock(lockKey, lockId) {\n  const current = await client.get(lockKey);\n  if (current === lockId) {\n    await client.del(lockKey);\n  }\n}", "example": "Lock"},
    {"id": "rds20", "type": "ratelimit", "name": "Rate Limiting", "description": "Rate limiter", "pattern": "async function rateLimit(userId, limit = 100, window = 60) {\n  const key = `ratelimit:${userId}`;\n  const current = await client.incr(key);\n  \n  if (current === 1) {\n    await client.expire(key, window);\n  }\n  \n  return {\n    allowed: current <= limit,\n    remaining: Math.max(0, limit - current),\n    reset: await client.ttl(key)\n  };\n}", "example": "Rate"},
    {"id": "rds21", "type": "session", "name": "Session Store", "description": "Session management", "pattern": "import session from 'express-session';\nimport RedisStore from 'connect-redis';\n\napp.use(session({\n  store: new RedisStore({ client }),\n  secret: 'secret',\n  resave: false,\n  saveUninitialized: false,\n  cookie: { maxAge: 86400000 }\n}));", "example": "Session"},
    {"id": "rds22", "type": "cluster", "name": "Cluster", "description": "Redis Cluster", "pattern": "import Redis from 'ioredis';\n\nconst cluster = new Redis.Cluster([\n  { host: 'node1', port: 6379 },\n  { host: 'node2', port: 6379 },\n  { host: 'node3', port: 6379 }\n]);", "example": "Cluster"},
    {"id": "rds23", "type": "sentinel", "name": "Sentinel", "description": "High availability", "pattern": "import Redis from 'ioredis';\n\nconst redis = new Redis({\n  sentinels: [\n    { host: 'sentinel1', port: 26379 },\n    { host: 'sentinel2', port: 26379 }\n  ],\n  name: 'mymaster'\n});", "example": "Sentinel"},
    {"id": "rds24", "type": "lua", "name": "Lua Scripts", "description": "Atomic scripts", "pattern": "const script = `\n  local current = redis.call('GET', KEYS[1])\n  if current then\n    return redis.call('INCR', KEYS[1])\n  else\n    redis.call('SET', KEYS[1], ARGV[1])\n    return ARGV[1]\n  end\n`;\n\nconst result = await client.eval(script, {\n  keys: ['counter'],\n  arguments: ['1']\n});", "example": "Lua"},
    {"id": "rds25", "type": "streams", "name": "Streams", "description": "Redis Streams", "pattern": "// Add to stream\nawait client.xAdd('events', '*', {\n  type: 'click',\n  page: '/home'\n});\n\n// Read from stream\nconst messages = await client.xRead(\n  { key: 'events', id: '0' },\n  { COUNT: 10 }\n);", "example": "Streams"},
    {"id": "rds26", "type": "geospatial", "name": "Geospatial", "description": "Location data", "pattern": "// Add locations\nawait client.geoAdd('stores', [\n  { longitude: -122.4194, latitude: 37.7749, member: 'sf' },\n  { longitude: -118.2437, latitude: 34.0522, member: 'la' }\n]);\n\n// Find nearby\nconst nearby = await client.geoSearch('stores', {\n  longitude: -122.4,\n  latitude: 37.7\n}, { radius: 100, unit: 'km' });", "example": "Geo"},
    {"id": "rds27", "type": "bitmap", "name": "Bitmaps", "description": "Bit operations", "pattern": "// Set bit\nawait client.setBit('active:2024-01-01', userId, 1);\n\n// Get bit\nconst active = await client.getBit('active:2024-01-01', userId);\n\n// Count bits\nconst count = await client.bitCount('active:2024-01-01');", "example": "Bitmap"},
    {"id": "rds28", "type": "hyperloglog", "name": "HyperLogLog", "description": "Cardinality estimation", "pattern": "// Add elements\nawait client.pfAdd('visitors:2024-01', 'user1', 'user2', 'user3');\n\n// Get approximate count\nconst count = await client.pfCount('visitors:2024-01');\n\n// Merge\nawait client.pfMerge('visitors:2024', 'visitors:2024-01', 'visitors:2024-02');", "example": "HLL"},
    {"id": "rds29", "type": "typescript", "name": "TypeScript", "description": "Type safety", "pattern": "import { createClient, RedisClientType } from 'redis';\n\ninterface CacheItem {\n  data: string;\n  timestamp: number;\n}\n\nconst client: RedisClientType = createClient();\n\nasync function getTyped<T>(key: string): Promise<T | null> {\n  const data = await client.get(key);\n  return data ? JSON.parse(data) : null;\n}", "example": "TypeScript"},
    {"id": "rds30", "type": "pattern", "name": "Best Practices", "description": "Patterns", "pattern": "// 1. Use connection pooling\n// 2. Set appropriate TTLs\n// 3. Use pipelines for batch operations\n// 4. Monitor memory usage\n// 5. Use Lua for atomic operations", "example": "Patterns"}
  ]
}
