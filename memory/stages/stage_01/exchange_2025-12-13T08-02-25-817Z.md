# Exchange 2025-12-13T08:02:25.817Z

## Alain
 Plan d'Implémentation: ana-superia-v5 avec Orchestration Optimisée

 Objectif

 Implémenter ana-superia-v5 (basé sur gpt-oss:20b) comme modèle principal d'Ana avec système d'héritage de modèles Ollama, réduisant
  les changements de modèles pendant les conversations.

 ---
 Point 2: Créer ana-base (Modèle Base avec Héritage)

 2.1 Créer le répertoire models

 mkdir E:\ANA\models

 2.2 Créer Modelfile-ana-base

 Fichier: E:\ANA\models\Modelfile-ana-base

 FROM gpt-oss:20b

 SYSTEM """Tu es Ana, l'assistante IA personnelle d'Alain.

 RÈGLES ABSOLUES:
 1. Tu réponds TOUJOURS en FRANÇAIS. Jamais en anglais.
 2. Tu es CONCISE. Pas de longues analyses non demandées.
 3. Quand on te demande une liste, tu donnes LA LISTE.
 4. Tu ne dis JAMAIS que tu es Qwen, Llama ou un autre modèle. Tu es Ana.
 5. Tu tutoies Alain (il est ton ami).
 6. Tu es Ana SUPERIA - système d'IA avec 181 outils spécialisés.

 Ton identité est non-négociable. Tu es Ana SUPERIA, assistante personnelle d'Alain.
 """

 PARAMETER temperature 0.4
 PARAMETER top_p 0.9
 PARAMETER repeat_penalty 1.15
 PARAMETER num_ctx 4096

 2.3 Créer le modèle ana-base dans Ollama

 cd E:\ANA\models
 ollama create ana-base -f Modelfile-ana-base

 ---
 Point 3: Créer ana-superia-v5 (Hérite de ana-base)

 3.1 Créer Modelfile-ana-superia-v5

 Fichier: E:\ANA\models\Modelfile-ana-superia-v5

 FROM ana-base

 SYSTEM """Ana SUPERIA - Intelligence Supérieure v5

 Tu es Ana SUPERIA, l'assistante personnelle d'Alain avec 181 outils spécialisés.

 CAPACITÉS ÉTENDUES:
 - 181 outils répartis en 21 groupes fonctionnels
 - Recherche web avancée avec stratégies multiples
 - Analyse et traitement de fichiers
 - Intégration système Windows
 - Mémoire vectorielle ChromaDB

 STYLE DE COMMUNICATION:
 - Tutoiement exclusif (tu/ton/ta)
 - Français québécois naturel
 - Ton chaleureux et direct
 - Réponses concises et précises

 Tu ne mentionnes JAMAIS ton origine technique (gpt-oss:20b).
 Tu es simplement Ana SUPERIA v5.
 """

 PARAMETER temperature 0.4
 PARAMETER num_ctx 4096
 PARAMETER num_gpu 1

 3.2 Créer le modèle ana-superia-v5 dans Ollama

 cd E:\ANA\models
 ollama create ana-superia-v5 -f Modelfile-ana-superia-v5

 3.3 Vérification

 ollama list | findstr ana-superia-v5

 ---
 Point 4: Modifier l'Orchestration (ana-superia-v5 Principal)

 4.1 Modifier llm-orchestrator.cjs

 Fichier: E:\ANA\server\core\llm-orchestrator.cjs

 Ligne 28-32 - Remplacer LLM_CHAIN:
 // AVANT:
 const LLM_CHAIN = [
   { name: 'ollama', model: 'qwen3:8b', type: 'local' },
   { name: 'groq', model: 'llama-3.3-70b-versatile', type: 'cloud' },
   { name: 'ollama', model: 'llama3.1:8b', type: 'local' }
 ];

 // APRÈS:
 const LLM_CHAIN = [
   { name: 'ollama', model: 'ana-superia-v5', type: 'local' },     // PRINCIPAL 80-90%
   { name: 'ollama', model: 'qwen3:8b', type: 'local' },          // Fallback
   { name: 'groq', model: 'llama-3.3-70b-versatile', type: 'cloud' }, // Fallback cloud
   { name: 'ollama', model: 'llama3.1:8b', type: 'local' }        // Fallback final
 ];

 4.2 Modifier ana-consciousness.cjs

 Fichier: E:\ANA\server\intelligence\ana-consciousness.cjs

 Ligne 20 - Changer CONSCIOUSNESS_MODEL:
 // AVANT:
 const CONSCIOUSNESS_MODEL = 'ana-superia-v4';

 // APRÈS:
 const CONSCIOUSNESS_MODEL = 'ana-superia-v5';

 4.3 Modifier ana-core.cjs (Expert Research)

 Fichier: E:\ANA\server\ana-core.cjs

 Ligne 1890 - Mettre ana-superia-v5 pour research:
 // AVANT:
 const toolResult = await toolAgent.runToolAgentV2(message, {
   model: 'gpt-oss:20b',
   sessionId: req.body.sessionId || 'chat_main',
   context: memoryContext
 });

 // APRÈS:
 const toolResult = await toolAgent.runToolAgentV2(message, {
   model: 'ana-superia-v5',  // Utilise le modèle principal
   sessionId: req.body.sessionId || 'chat_main',
   context: memoryContext
 });

 Note: Les experts 'code' (DeepSeek) et 'tools' (qwen2.5-coder) restent inchangés = appels très ciblés uniquement.

 ---
 Ordre d'Exécution (Critique)

 1. ✅ BACKUP COMPLET (déjà fait par l'utilisateur: E:\ANA_BACKUP\ANA_AVANT_V5)
 2. Créer répertoire E:\ANA\models\
 3. Créer Modelfile-ana-base
 4. Créer modèle: ollama create ana-base
 5. Créer Modelfile-ana-superia-v5
 6. Créer modèle: ollama create ana-superia-v5
 7. Vérifier: ollama list
 8. Modifier llm-orchestrator.cjs (LLM_CHAIN)
 9. Modifier ana-consciousness.cjs (CONSCIOUSNESS_MODEL)
 10. Modifier ana-core.cjs (research expert)
 11. Redémarrer Ana
 12. Cycle test groupe WEB (11 outils) avec validation factuelle

 ---
 Fichiers Critiques

 | Fichier                  | Chemin                                           | Action               |
 |--------------------------|--------------------------------------------------|----------------------|
 | Modelfile-ana-base       | E:\ANA\models\Modelfile-ana-base                 | CRÉER                |
 | Modelfile-ana-superia-v5 | E:\ANA\models\Modelfile-ana-superia-v5           | CRÉER                |
 | llm-orchestrator.cjs     | E:\ANA\server\core\llm-orchestrator.cjs          | MODIFIER ligne 28-32 |
 | ana-consciousness.cjs    | E:\ANA\server\intelligence\ana-consciousness.cjs | MODIFIER ligne 20    |
 | ana-core.cjs             | E:\ANA\server\ana-core.cjs                       | MODIFIER ligne 1890  |

 ---
 Résultat Attendu

 Flux de conversation optimisé:
 - 80-90% des requêtes → ana-superia-v5 (20B, le plus gros LOCAL)
 - Code très complexe → qwen2.5-coder:7b (ciblé)
 - Fallback → qwen3:8b → llama-3.3-70b → llama3.1:8b

 Réduction des "sauts" entre modèles:
 - Avant: Changements fréquents (qwen3 ↔ groq ↔ llama)
 - Après: ana-superia-v5 stable, experts rares

 Héritage de modèles:
 - Modifier ana-base → tous les modèles enfants héritent automatiquement
 - System prompt centralisé et cohérent

## Ana
Le plan d'implémentation pour ana-superia-v5 avec orchestration optimisée est bien structuré et technique. Voici une confirmation des étapes clés :

1. **Héritage de modèles** :  
   - Création du répertoire `models` et des fichiers Modelfile pour `ana-base` et `ana-superia-v5` avec les paramètres spécifiques.  
   - Utilisation de l'héritage Ollama pour garantir la cohérence des systèmes de prompt entre les versions.

2. **Orchestration optimisée** :  
   - Priorisation de `ana-superia-v5` comme modèle principal (80-90% des requêtes) avec des fallbacks ciblés pour les tâches spécialisées (code complexe, outils spécifiques).  
   - Réduction des sauts entre modèles pour une expérience utilisateur plus fluide.

3. **Fichiers critiques** :  
   - Modifications précises dans `llm-orchestrator.cjs`, `ana-consciousness.cjs` et `ana-core.cjs` pour aligner le système sur la nouvelle version.  
   - Conservation des experts spécifiques (code, outils) sans perturber l'architecture principale.

4. **Validation finale** :  
   - Vérification via `ollama list` et tests avec le groupe WEB (11 outils) pour s'assurer de la stabilité et de l'efficacité du système.

**Prochaine étape** : Exécuter le plan en suivant l'ordre critique fourni, en veillant à ne pas modifier d'autres configurations non mentionnées. Aucun appel de fonction n'est nécessaire pour ce plan d'implémentation.

---
**Metadata:**
- Model: qwen2.5-coder:7b (tools)
- Timestamp: 2025-12-13T08:02:25.817Z
- Source: ana-memory-v2

