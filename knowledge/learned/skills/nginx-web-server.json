{
  "category": "nginx-web-server",
  "version": "1.0.0",
  "generatedBy": "Claude (Opus 4.5)",
  "description": "Nginx web server configuration patterns",
  "skills": [
    {"id": "ngx01", "type": "setup", "name": "Install Nginx", "description": "Installation", "pattern": "# Ubuntu/Debian\nsudo apt update\nsudo apt install nginx\n\n# macOS\nbrew install nginx\n\n# Docker\ndocker run -d -p 80:80 nginx", "example": "Install"},
    {"id": "ngx02", "type": "basic", "name": "Basic Config", "description": "Server block", "pattern": "server {\n    listen 80;\n    server_name example.com;\n    root /var/www/html;\n    index index.html;\n\n    location / {\n        try_files $uri $uri/ =404;\n    }\n}", "example": "Basic"},
    {"id": "ngx03", "type": "ssl", "name": "SSL/TLS", "description": "HTTPS config", "pattern": "server {\n    listen 443 ssl http2;\n    server_name example.com;\n\n    ssl_certificate /etc/ssl/certs/cert.pem;\n    ssl_certificate_key /etc/ssl/private/key.pem;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n\n    # Redirect HTTP to HTTPS\n}\n\nserver {\n    listen 80;\n    server_name example.com;\n    return 301 https://$server_name$request_uri;\n}", "example": "SSL"},
    {"id": "ngx04", "type": "proxy", "name": "Reverse Proxy", "description": "Proxy pass", "pattern": "server {\n    listen 80;\n    server_name api.example.com;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_cache_bypass $http_upgrade;\n    }\n}", "example": "Proxy"},
    {"id": "ngx05", "type": "upstream", "name": "Load Balancing", "description": "Upstream servers", "pattern": "upstream backend {\n    least_conn;  # or ip_hash, round_robin\n    server 127.0.0.1:3001 weight=3;\n    server 127.0.0.1:3002;\n    server 127.0.0.1:3003 backup;\n}\n\nserver {\n    location / {\n        proxy_pass http://backend;\n    }\n}", "example": "Upstream"},
    {"id": "ngx06", "type": "location", "name": "Location Blocks", "description": "URL matching", "pattern": "server {\n    # Exact match\n    location = /exact { ... }\n    \n    # Prefix match\n    location /api/ { ... }\n    \n    # Regex match\n    location ~ \\.php$ { ... }\n    \n    # Case-insensitive regex\n    location ~* \\.(jpg|png|gif)$ { ... }\n    \n    # Priority prefix\n    location ^~ /images/ { ... }\n}", "example": "Location"},
    {"id": "ngx07", "type": "static", "name": "Static Files", "description": "Serve static", "pattern": "server {\n    root /var/www/html;\n    \n    location /static/ {\n        alias /var/www/static/;\n        expires 30d;\n        add_header Cache-Control \"public, immutable\";\n    }\n    \n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico)$ {\n        expires max;\n        log_not_found off;\n    }\n}", "example": "Static"},
    {"id": "ngx08", "type": "gzip", "name": "Gzip Compression", "description": "Compress responses", "pattern": "http {\n    gzip on;\n    gzip_vary on;\n    gzip_proxied any;\n    gzip_comp_level 6;\n    gzip_types text/plain text/css text/xml application/json application/javascript application/xml;\n    gzip_min_length 256;\n}", "example": "Gzip"},
    {"id": "ngx09", "type": "cache", "name": "Caching", "description": "Proxy cache", "pattern": "http {\n    proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=my_cache:10m max_size=1g inactive=60m;\n}\n\nserver {\n    location / {\n        proxy_cache my_cache;\n        proxy_cache_valid 200 60m;\n        proxy_cache_valid 404 1m;\n        add_header X-Cache-Status $upstream_cache_status;\n    }\n}", "example": "Cache"},
    {"id": "ngx10", "type": "redirect", "name": "Redirects", "description": "URL redirects", "pattern": "server {\n    # Permanent redirect (301)\n    location /old-page {\n        return 301 /new-page;\n    }\n    \n    # Temporary redirect (302)\n    location /temp {\n        return 302 /other;\n    }\n    \n    # Rewrite\n    rewrite ^/blog/(.*)$ /articles/$1 permanent;\n}", "example": "Redirect"},
    {"id": "ngx11", "type": "cors", "name": "CORS Headers", "description": "Cross-origin", "pattern": "location /api/ {\n    add_header 'Access-Control-Allow-Origin' '*';\n    add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';\n    add_header 'Access-Control-Allow-Headers' 'DNT,User-Agent,X-Requested-With,Content-Type,Authorization';\n    \n    if ($request_method = 'OPTIONS') {\n        return 204;\n    }\n}", "example": "CORS"},
    {"id": "ngx12", "type": "security", "name": "Security Headers", "description": "Secure headers", "pattern": "server {\n    add_header X-Frame-Options \"SAMEORIGIN\" always;\n    add_header X-Content-Type-Options \"nosniff\" always;\n    add_header X-XSS-Protection \"1; mode=block\" always;\n    add_header Content-Security-Policy \"default-src 'self'\" always;\n    add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\" always;\n}", "example": "Security"},
    {"id": "ngx13", "type": "ratelimit", "name": "Rate Limiting", "description": "Request limits", "pattern": "http {\n    limit_req_zone $binary_remote_addr zone=mylimit:10m rate=10r/s;\n}\n\nserver {\n    location /api/ {\n        limit_req zone=mylimit burst=20 nodelay;\n        limit_req_status 429;\n    }\n}", "example": "RateLimit"},
    {"id": "ngx14", "type": "basicauth", "name": "Basic Auth", "description": "Password protection", "pattern": "# Create password file\n# htpasswd -c /etc/nginx/.htpasswd username\n\nserver {\n    location /admin/ {\n        auth_basic \"Restricted\";\n        auth_basic_user_file /etc/nginx/.htpasswd;\n    }\n}", "example": "BasicAuth"},
    {"id": "ngx15", "type": "websocket", "name": "WebSocket", "description": "WS proxy", "pattern": "location /ws/ {\n    proxy_pass http://localhost:3000;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_set_header Host $host;\n    proxy_read_timeout 86400;\n}", "example": "WebSocket"},
    {"id": "ngx16", "type": "spa", "name": "SPA Config", "description": "Single page app", "pattern": "server {\n    root /var/www/app;\n    index index.html;\n\n    location / {\n        try_files $uri $uri/ /index.html;\n    }\n\n    location /api/ {\n        proxy_pass http://localhost:3000;\n    }\n}", "example": "SPA"},
    {"id": "ngx17", "type": "logs", "name": "Logging", "description": "Access/error logs", "pattern": "http {\n    log_format main '$remote_addr - $remote_user [$time_local] \"$request\" '\n                    '$status $body_bytes_sent \"$http_referer\" '\n                    '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log /var/log/nginx/access.log main;\n    error_log /var/log/nginx/error.log warn;\n}", "example": "Logs"},
    {"id": "ngx18", "type": "php", "name": "PHP-FPM", "description": "PHP processing", "pattern": "server {\n    root /var/www/html;\n    index index.php;\n\n    location ~ \\.php$ {\n        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include fastcgi_params;\n    }\n}", "example": "PHP"},
    {"id": "ngx19", "type": "include", "name": "Include Files", "description": "Config organization", "pattern": "# nginx.conf\nhttp {\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\n\n# sites-available/mysite.conf\nserver {\n    include /etc/nginx/snippets/ssl.conf;\n    include /etc/nginx/snippets/security.conf;\n}", "example": "Include"},
    {"id": "ngx20", "type": "variables", "name": "Variables", "description": "Built-in variables", "pattern": "$host         # Request host\n$uri          # Current URI\n$args         # Query string\n$request_uri  # Full request URI\n$remote_addr  # Client IP\n$server_name  # Server name\n$request_method # HTTP method\n$scheme       # http or https", "example": "Variables"},
    {"id": "ngx21", "type": "map", "name": "Map Directive", "description": "Variable mapping", "pattern": "map $http_user_agent $is_mobile {\n    default 0;\n    ~*mobile 1;\n    ~*android 1;\n}\n\nserver {\n    if ($is_mobile) {\n        return 302 https://m.example.com$request_uri;\n    }\n}", "example": "Map"},
    {"id": "ngx22", "type": "timeout", "name": "Timeouts", "description": "Connection timeouts", "pattern": "http {\n    client_body_timeout 12;\n    client_header_timeout 12;\n    keepalive_timeout 15;\n    send_timeout 10;\n}\n\nlocation / {\n    proxy_connect_timeout 60;\n    proxy_send_timeout 60;\n    proxy_read_timeout 60;\n}", "example": "Timeout"},
    {"id": "ngx23", "type": "buffers", "name": "Buffers", "description": "Buffer settings", "pattern": "http {\n    client_body_buffer_size 10K;\n    client_header_buffer_size 1k;\n    client_max_body_size 8m;\n    large_client_header_buffers 4 16k;\n}\n\nlocation / {\n    proxy_buffer_size 128k;\n    proxy_buffers 4 256k;\n    proxy_busy_buffers_size 256k;\n}", "example": "Buffers"},
    {"id": "ngx24", "type": "health", "name": "Health Check", "description": "Upstream health", "pattern": "upstream backend {\n    server 127.0.0.1:3001;\n    server 127.0.0.1:3002;\n}\n\nserver {\n    location /health {\n        return 200 'OK';\n        add_header Content-Type text/plain;\n    }\n}", "example": "Health"},
    {"id": "ngx25", "type": "docker", "name": "Docker Config", "description": "Docker nginx", "pattern": "# Dockerfile\nFROM nginx:alpine\nCOPY nginx.conf /etc/nginx/nginx.conf\nCOPY dist/ /usr/share/nginx/html/\nEXPOSE 80\n\n# docker-compose.yml\nservices:\n  nginx:\n    image: nginx:alpine\n    ports:\n      - '80:80'\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./html:/usr/share/nginx/html:ro", "example": "Docker"},
    {"id": "ngx26", "type": "test", "name": "Test Config", "description": "Validate config", "pattern": "# Test syntax\nnginx -t\n\n# Reload config\nnginx -s reload\n\n# Start/Stop\nsystemctl start nginx\nsystemctl stop nginx\nsystemctl restart nginx", "example": "Test"},
    {"id": "ngx27", "type": "stream", "name": "TCP/UDP Proxy", "description": "Stream proxy", "pattern": "stream {\n    upstream mysql {\n        server 127.0.0.1:3306;\n    }\n    \n    server {\n        listen 3306;\n        proxy_pass mysql;\n        proxy_connect_timeout 1s;\n    }\n}", "example": "Stream"},
    {"id": "ngx28", "type": "http2", "name": "HTTP/2", "description": "HTTP/2 config", "pattern": "server {\n    listen 443 ssl http2;\n    server_name example.com;\n    \n    ssl_certificate /etc/ssl/certs/cert.pem;\n    ssl_certificate_key /etc/ssl/private/key.pem;\n    \n    http2_push_preload on;\n}", "example": "HTTP2"},
    {"id": "ngx29", "type": "letsencrypt", "name": "Let's Encrypt", "description": "Free SSL", "pattern": "# Install certbot\nsudo apt install certbot python3-certbot-nginx\n\n# Get certificate\nsudo certbot --nginx -d example.com -d www.example.com\n\n# Auto-renewal\nsudo certbot renew --dry-run", "example": "LetsEncrypt"},
    {"id": "ngx30", "type": "pattern", "name": "Best Practices", "description": "Patterns", "pattern": "// 1. Use server blocks per domain\n// 2. Enable gzip compression\n// 3. Set up SSL/TLS\n// 4. Configure security headers\n// 5. Use rate limiting", "example": "Patterns"}
  ]
}
