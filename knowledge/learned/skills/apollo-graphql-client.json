{
  "category": "apollo-graphql-client",
  "version": "1.0.0",
  "generatedBy": "Claude (Opus 4.5)",
  "description": "Apollo Client GraphQL patterns for React",
  "skills": [
    {"id": "apc01", "type": "setup", "name": "Install Apollo Client", "description": "NPM install", "pattern": "npm install @apollo/client graphql", "example": "Install"},
    {"id": "apc02", "type": "setup", "name": "Create Client", "description": "Client instance", "pattern": "import { ApolloClient, InMemoryCache, HttpLink } from '@apollo/client';\n\nconst client = new ApolloClient({\n  link: new HttpLink({ uri: 'http://localhost:4000/graphql' }),\n  cache: new InMemoryCache()\n});", "example": "Create client"},
    {"id": "apc03", "type": "provider", "name": "Apollo Provider", "description": "React provider", "pattern": "import { ApolloProvider } from '@apollo/client';\n\nfunction App() {\n  return (\n    <ApolloProvider client={client}>\n      <Router />\n    </ApolloProvider>\n  );\n}", "example": "Provider"},
    {"id": "apc04", "type": "query", "name": "useQuery Hook", "description": "Fetch data", "pattern": "import { useQuery, gql } from '@apollo/client';\n\nconst GET_USERS = gql`\n  query GetUsers {\n    users { id name email }\n  }\n`;\n\nfunction Users() {\n  const { loading, error, data } = useQuery(GET_USERS);\n  if (loading) return <Spinner />;\n  if (error) return <Error message={error.message} />;\n  return data.users.map(user => <UserCard key={user.id} user={user} />);\n}", "example": "useQuery"},
    {"id": "apc05", "type": "query", "name": "Query Variables", "description": "Pass variables", "pattern": "const GET_USER = gql`\n  query GetUser($id: ID!) {\n    user(id: $id) { id name email posts { title } }\n  }\n`;\n\nfunction UserProfile({ userId }) {\n  const { data } = useQuery(GET_USER, {\n    variables: { id: userId }\n  });\n}", "example": "Variables"},
    {"id": "apc06", "type": "query", "name": "Query Options", "description": "Fetch policies", "pattern": "const { data } = useQuery(GET_USERS, {\n  fetchPolicy: 'cache-and-network',\n  pollInterval: 5000,\n  notifyOnNetworkStatusChange: true,\n  skip: !isAuthenticated,\n  onCompleted: (data) => console.log('Done', data),\n  onError: (error) => console.error(error)\n});", "example": "Query options"},
    {"id": "apc07", "type": "query", "name": "useLazyQuery", "description": "Manual query", "pattern": "import { useLazyQuery } from '@apollo/client';\n\nconst [searchUsers, { loading, data }] = useLazyQuery(SEARCH_USERS);\n\nconst handleSearch = (term) => {\n  searchUsers({ variables: { term } });\n};", "example": "useLazyQuery"},
    {"id": "apc08", "type": "mutation", "name": "useMutation Hook", "description": "Modify data", "pattern": "import { useMutation, gql } from '@apollo/client';\n\nconst CREATE_USER = gql`\n  mutation CreateUser($input: CreateUserInput!) {\n    createUser(input: $input) { id name }\n  }\n`;\n\nconst [createUser, { loading }] = useMutation(CREATE_USER);", "example": "useMutation"},
    {"id": "apc09", "type": "mutation", "name": "Mutation with Update", "description": "Cache update", "pattern": "const [createUser] = useMutation(CREATE_USER, {\n  update(cache, { data: { createUser } }) {\n    cache.modify({\n      fields: {\n        users(existingUsers = []) {\n          const newUserRef = cache.writeFragment({\n            data: createUser,\n            fragment: gql`fragment NewUser on User { id name }`\n          });\n          return [...existingUsers, newUserRef];\n        }\n      }\n    });\n  }\n});", "example": "Cache update"},
    {"id": "apc10", "type": "mutation", "name": "Optimistic Response", "description": "Instant UI update", "pattern": "const [createTodo] = useMutation(CREATE_TODO, {\n  optimisticResponse: {\n    createTodo: {\n      __typename: 'Todo',\n      id: 'temp-id',\n      text: input,\n      completed: false\n    }\n  }\n});", "example": "Optimistic"},
    {"id": "apc11", "type": "mutation", "name": "Refetch Queries", "description": "Refresh after mutation", "pattern": "const [deleteUser] = useMutation(DELETE_USER, {\n  refetchQueries: [\n    { query: GET_USERS },\n    'GetUserCount'\n  ],\n  awaitRefetchQueries: true\n});", "example": "Refetch queries"},
    {"id": "apc12", "type": "subscription", "name": "useSubscription Hook", "description": "Real-time updates", "pattern": "import { useSubscription, gql } from '@apollo/client';\n\nconst MESSAGE_SUBSCRIPTION = gql`\n  subscription OnMessage($channelId: ID!) {\n    messageCreated(channelId: $channelId) { id text author }\n  }\n`;\n\nconst { data } = useSubscription(MESSAGE_SUBSCRIPTION, {\n  variables: { channelId }\n});", "example": "useSubscription"},
    {"id": "apc13", "type": "subscription", "name": "subscribeToMore", "description": "Add subscription to query", "pattern": "const { subscribeToMore, data } = useQuery(GET_MESSAGES);\n\nuseEffect(() => {\n  return subscribeToMore({\n    document: MESSAGE_SUBSCRIPTION,\n    variables: { channelId },\n    updateQuery: (prev, { subscriptionData }) => {\n      if (!subscriptionData.data) return prev;\n      return {\n        messages: [...prev.messages, subscriptionData.data.messageCreated]\n      };\n    }\n  });\n}, [channelId]);", "example": "subscribeToMore"},
    {"id": "apc14", "type": "fragment", "name": "Fragments", "description": "Reusable fields", "pattern": "const USER_FRAGMENT = gql`\n  fragment UserFields on User {\n    id\n    name\n    email\n    avatar\n  }\n`;\n\nconst GET_USER = gql`\n  ${USER_FRAGMENT}\n  query GetUser($id: ID!) {\n    user(id: $id) { ...UserFields posts { title } }\n  }\n`;", "example": "Fragments"},
    {"id": "apc15", "type": "cache", "name": "Cache Configuration", "description": "InMemoryCache options", "pattern": "const cache = new InMemoryCache({\n  typePolicies: {\n    User: {\n      keyFields: ['id'],\n      fields: {\n        fullName: {\n          read(_, { readField }) {\n            return `${readField('firstName')} ${readField('lastName')}`;\n          }\n        }\n      }\n    }\n  }\n});", "example": "Cache config"},
    {"id": "apc16", "type": "cache", "name": "Read/Write Cache", "description": "Direct cache access", "pattern": "// Read from cache\nconst user = client.readFragment({\n  id: 'User:123',\n  fragment: USER_FRAGMENT\n});\n\n// Write to cache\nclient.writeFragment({\n  id: 'User:123',\n  fragment: USER_FRAGMENT,\n  data: { ...user, name: 'New Name' }\n});", "example": "Read/Write cache"},
    {"id": "apc17", "type": "cache", "name": "Cache Eviction", "description": "Remove from cache", "pattern": "client.cache.evict({ id: 'User:123' });\nclient.cache.evict({ id: 'User:123', fieldName: 'posts' });\nclient.cache.gc(); // Garbage collection", "example": "Cache eviction"},
    {"id": "apc18", "type": "pagination", "name": "Offset Pagination", "description": "Limit/offset", "pattern": "const { data, fetchMore } = useQuery(GET_USERS, {\n  variables: { offset: 0, limit: 10 }\n});\n\nconst loadMore = () => {\n  fetchMore({\n    variables: { offset: data.users.length }\n  });\n};", "example": "Offset pagination"},
    {"id": "apc19", "type": "pagination", "name": "Cursor Pagination", "description": "Relay-style", "pattern": "const cache = new InMemoryCache({\n  typePolicies: {\n    Query: {\n      fields: {\n        users: relayStylePagination()\n      }\n    }\n  }\n});", "example": "Cursor pagination"},
    {"id": "apc20", "type": "link", "name": "Apollo Link Chain", "description": "Middleware links", "pattern": "import { ApolloLink, HttpLink } from '@apollo/client';\n\nconst authLink = new ApolloLink((operation, forward) => {\n  operation.setContext(({ headers }) => ({\n    headers: {\n      ...headers,\n      authorization: `Bearer ${getToken()}`\n    }\n  }));\n  return forward(operation);\n});\n\nconst client = new ApolloClient({\n  link: authLink.concat(httpLink),\n  cache: new InMemoryCache()\n});", "example": "Link chain"},
    {"id": "apc21", "type": "link", "name": "Error Link", "description": "Handle errors", "pattern": "import { onError } from '@apollo/client/link/error';\n\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\n  if (graphQLErrors) {\n    graphQLErrors.forEach(({ message, locations, path }) =>\n      console.log(`[GraphQL error]: ${message}`)\n    );\n  }\n  if (networkError) console.log(`[Network error]: ${networkError}`);\n});", "example": "Error link"},
    {"id": "apc22", "type": "link", "name": "WebSocket Link", "description": "Subscriptions", "pattern": "import { split, HttpLink } from '@apollo/client';\nimport { GraphQLWsLink } from '@apollo/client/link/subscriptions';\nimport { getMainDefinition } from '@apollo/client/utilities';\nimport { createClient } from 'graphql-ws';\n\nconst wsLink = new GraphQLWsLink(createClient({ url: 'ws://localhost:4000/graphql' }));\nconst link = split(\n  ({ query }) => {\n    const def = getMainDefinition(query);\n    return def.kind === 'OperationDefinition' && def.operation === 'subscription';\n  },\n  wsLink,\n  httpLink\n);", "example": "WebSocket link"},
    {"id": "apc23", "type": "error", "name": "Error Handling", "description": "Query errors", "pattern": "const { data, error } = useQuery(GET_USER);\n\nif (error) {\n  if (error.graphQLErrors.some(e => e.extensions.code === 'UNAUTHENTICATED')) {\n    return <Redirect to=\"/login\" />;\n  }\n  return <ErrorDisplay error={error} />;\n}", "example": "Error handling"},
    {"id": "apc24", "type": "local", "name": "Local State", "description": "Client-side state", "pattern": "const cache = new InMemoryCache({\n  typePolicies: {\n    Query: {\n      fields: {\n        isLoggedIn: {\n          read() {\n            return !!localStorage.getItem('token');\n          }\n        }\n      }\n    }\n  }\n});\n\n// Query local state\nconst IS_LOGGED_IN = gql`query { isLoggedIn @client }`;", "example": "Local state"},
    {"id": "apc25", "type": "reactive", "name": "Reactive Variables", "description": "Local reactive state", "pattern": "import { makeVar, useReactiveVar } from '@apollo/client';\n\nexport const cartItemsVar = makeVar([]);\n\n// In component\nconst cartItems = useReactiveVar(cartItemsVar);\n\n// Update\ncartItemsVar([...cartItemsVar(), newItem]);", "example": "Reactive vars"},
    {"id": "apc26", "type": "testing", "name": "MockedProvider", "description": "Test components", "pattern": "import { MockedProvider } from '@apollo/client/testing';\n\nconst mocks = [{\n  request: { query: GET_USER, variables: { id: '1' } },\n  result: { data: { user: { id: '1', name: 'John' } } }\n}];\n\nrender(\n  <MockedProvider mocks={mocks} addTypename={false}>\n    <UserProfile userId=\"1\" />\n  </MockedProvider>\n);", "example": "MockedProvider"},
    {"id": "apc27", "type": "devtools", "name": "Apollo DevTools", "description": "Browser extension", "pattern": "// Enable in development\nconst client = new ApolloClient({\n  link: httpLink,\n  cache: new InMemoryCache(),\n  connectToDevTools: true\n});", "example": "DevTools"},
    {"id": "apc28", "type": "batch", "name": "Query Batching", "description": "Batch HTTP requests", "pattern": "import { BatchHttpLink } from '@apollo/client/link/batch-http';\n\nconst link = new BatchHttpLink({\n  uri: '/graphql',\n  batchMax: 5,\n  batchInterval: 20\n});", "example": "Query batching"},
    {"id": "apc29", "type": "persist", "name": "Cache Persistence", "description": "Persist cache", "pattern": "import { persistCache } from 'apollo3-cache-persist';\n\nawait persistCache({\n  cache,\n  storage: window.localStorage,\n  debug: true,\n  trigger: 'write'\n});", "example": "Cache persistence"},
    {"id": "apc30", "type": "codegen", "name": "GraphQL Codegen", "description": "Type generation", "pattern": "# codegen.ts\nimport { CodegenConfig } from '@graphql-codegen/cli';\n\nconst config: CodegenConfig = {\n  schema: 'http://localhost:4000/graphql',\n  documents: ['src/**/*.tsx'],\n  generates: {\n    './src/gql/': { preset: 'client' }\n  }\n};\nexport default config;", "example": "Codegen"}
  ]
}
