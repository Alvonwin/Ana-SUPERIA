{
  "category": "react-query-data",
  "version": "1.0.0",
  "generatedBy": "Claude (Opus 4.5)",
  "description": "TanStack Query (React Query) data fetching patterns",
  "skills": [
    {"id": "rqd01", "type": "setup", "name": "Install", "description": "NPM install", "pattern": "npm install @tanstack/react-query @tanstack/react-query-devtools", "example": "Install"},
    {"id": "rqd02", "type": "provider", "name": "Provider", "description": "Client setup", "pattern": "import { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\nconst queryClient = new QueryClient();\n\n<QueryClientProvider client={queryClient}>\n  <App />\n</QueryClientProvider>", "example": "Provider"},
    {"id": "rqd03", "type": "query", "name": "useQuery", "description": "Fetch data", "pattern": "const { data, isLoading, error } = useQuery({\n  queryKey: ['users'],\n  queryFn: () => fetch('/api/users').then(r => r.json())\n});", "example": "useQuery"},
    {"id": "rqd04", "type": "query", "name": "Query Key", "description": "Cache key", "pattern": "['users']\n['users', userId]\n['users', { status: 'active' }]", "example": "Query key"},
    {"id": "rqd05", "type": "mutation", "name": "useMutation", "description": "Modify data", "pattern": "const mutation = useMutation({\n  mutationFn: (newUser) => fetch('/api/users', { method: 'POST', body: JSON.stringify(newUser) }),\n  onSuccess: () => queryClient.invalidateQueries({ queryKey: ['users'] })\n});", "example": "useMutation"},
    {"id": "rqd06", "type": "mutation", "name": "Callbacks", "description": "Lifecycle hooks", "pattern": "useMutation({\n  mutationFn,\n  onMutate: async (vars) => {},\n  onSuccess: (data, vars) => {},\n  onError: (err, vars, ctx) => {},\n  onSettled: (data, err, vars) => {}\n});", "example": "Callbacks"},
    {"id": "rqd07", "type": "invalidate", "name": "Invalidate", "description": "Refetch data", "pattern": "queryClient.invalidateQueries({ queryKey: ['users'] });", "example": "Invalidate"},
    {"id": "rqd08", "type": "optimistic", "name": "Optimistic", "description": "Instant UI update", "pattern": "onMutate: async (newData) => {\n  await queryClient.cancelQueries({ queryKey: ['todos'] });\n  const previous = queryClient.getQueryData(['todos']);\n  queryClient.setQueryData(['todos'], old => [...old, newData]);\n  return { previous };\n},\nonError: (err, vars, ctx) => queryClient.setQueryData(['todos'], ctx.previous)", "example": "Optimistic"},
    {"id": "rqd09", "type": "cache", "name": "Options", "description": "Cache config", "pattern": "useQuery({\n  queryKey: ['users'],\n  queryFn,\n  staleTime: 5 * 60 * 1000,\n  gcTime: 10 * 60 * 1000,\n  refetchOnWindowFocus: false,\n  retry: 3\n});", "example": "Options"},
    {"id": "rqd10", "type": "enabled", "name": "Conditional", "description": "Enable/disable", "pattern": "useQuery({\n  queryKey: ['user', userId],\n  queryFn: () => fetchUser(userId),\n  enabled: !!userId\n});", "example": "Conditional"},
    {"id": "rqd11", "type": "dependent", "name": "Dependent", "description": "Chained queries", "pattern": "const { data: user } = useQuery({ queryKey: ['user', id], queryFn });\nconst { data: posts } = useQuery({\n  queryKey: ['posts', user?.id],\n  queryFn: () => fetchPosts(user.id),\n  enabled: !!user?.id\n});", "example": "Dependent"},
    {"id": "rqd12", "type": "parallel", "name": "Parallel", "description": "Multiple queries", "pattern": "const results = useQueries({\n  queries: ids.map(id => ({ queryKey: ['user', id], queryFn: () => fetchUser(id) }))\n});", "example": "Parallel"},
    {"id": "rqd13", "type": "infinite", "name": "Infinite", "description": "Pagination", "pattern": "const { data, fetchNextPage, hasNextPage } = useInfiniteQuery({\n  queryKey: ['posts'],\n  queryFn: ({ pageParam = 0 }) => fetchPosts(pageParam),\n  getNextPageParam: (lastPage) => lastPage.nextCursor,\n  initialPageParam: 0\n});", "example": "Infinite"},
    {"id": "rqd14", "type": "prefetch", "name": "Prefetch", "description": "Preload data", "pattern": "queryClient.prefetchQuery({\n  queryKey: ['user', id],\n  queryFn: () => fetchUser(id)\n});", "example": "Prefetch"},
    {"id": "rqd15", "type": "placeholder", "name": "Placeholder", "description": "Initial data", "pattern": "useQuery({\n  queryKey: ['user', id],\n  queryFn,\n  placeholderData: { name: 'Loading...' }\n});", "example": "Placeholder"},
    {"id": "rqd16", "type": "select", "name": "Select", "description": "Transform data", "pattern": "useQuery({\n  queryKey: ['users'],\n  queryFn,\n  select: (data) => data.filter(u => u.active)\n});", "example": "Select"},
    {"id": "rqd17", "type": "refetch", "name": "Refetch", "description": "Manual refetch", "pattern": "const { refetch, isRefetching } = useQuery({ queryKey, queryFn });\n<button onClick={() => refetch()}>Refresh</button>", "example": "Refetch"},
    {"id": "rqd18", "type": "suspense", "name": "Suspense", "description": "React Suspense", "pattern": "const { data } = useSuspenseQuery({ queryKey, queryFn });\n\n<Suspense fallback={<Loading />}>\n  <Component />\n</Suspense>", "example": "Suspense"},
    {"id": "rqd19", "type": "defaults", "name": "Defaults", "description": "Global config", "pattern": "new QueryClient({\n  defaultOptions: {\n    queries: { staleTime: 60000, retry: 1 },\n    mutations: { retry: 0 }\n  }\n});", "example": "Defaults"},
    {"id": "rqd20", "type": "devtools", "name": "DevTools", "description": "Debug tools", "pattern": "import { ReactQueryDevtools } from '@tanstack/react-query-devtools';\n\n<ReactQueryDevtools initialIsOpen={false} />", "example": "DevTools"},
    {"id": "rqd21", "type": "hydrate", "name": "SSR", "description": "Server rendering", "pattern": "await queryClient.prefetchQuery({ queryKey, queryFn });\nconst state = dehydrate(queryClient);\n\n<HydrationBoundary state={state}><App /></HydrationBoundary>", "example": "SSR"},
    {"id": "rqd22", "type": "persist", "name": "Persist", "description": "Offline support", "pattern": "import { persistQueryClient } from '@tanstack/react-query-persist-client';\nimport { createSyncStoragePersister } from '@tanstack/query-sync-storage-persister';\n\npersistQueryClient({ queryClient, persister });", "example": "Persist"},
    {"id": "rqd23", "type": "cancel", "name": "Cancel", "description": "Abort requests", "pattern": "queryFn: async ({ signal }) => {\n  const res = await fetch('/api', { signal });\n  return res.json();\n}\n\nqueryClient.cancelQueries({ queryKey });", "example": "Cancel"},
    {"id": "rqd24", "type": "retry", "name": "Retry", "description": "Custom retry", "pattern": "retry: 3,\nretryDelay: (attempt) => Math.min(1000 * 2 ** attempt, 30000)", "example": "Retry"},
    {"id": "rqd25", "type": "error", "name": "Error Boundary", "description": "Error handling", "pattern": "useQuery({\n  queryKey,\n  queryFn,\n  throwOnError: true\n});\n\n<ErrorBoundary><Component /></ErrorBoundary>", "example": "Error boundary"},
    {"id": "rqd26", "type": "update", "name": "Set Data", "description": "Direct cache update", "pattern": "queryClient.setQueryData(['users'], old => [...old, newUser]);\nconst users = queryClient.getQueryData(['users']);", "example": "Set data"},
    {"id": "rqd27", "type": "network", "name": "Network Mode", "description": "Offline handling", "pattern": "networkMode: 'offlineFirst'  // 'online', 'always', 'offlineFirst'", "example": "Network mode"},
    {"id": "rqd28", "type": "status", "name": "Status", "description": "Status flags", "pattern": "const { status, isPending, isError, isSuccess, isFetching, isRefetching, fetchStatus } = useQuery({ queryKey, queryFn });", "example": "Status"},
    {"id": "rqd29", "type": "typescript", "name": "TypeScript", "description": "Type safety", "pattern": "interface User { id: number; name: string; }\nconst { data } = useQuery<User[], Error>({ queryKey, queryFn });", "example": "TypeScript"},
    {"id": "rqd30", "type": "test", "name": "Testing", "description": "Test queries", "pattern": "const client = new QueryClient({ defaultOptions: { queries: { retry: false } } });\nrender(<QueryClientProvider client={client}>{ui}</QueryClientProvider>);", "example": "Testing"}
  ]
}
