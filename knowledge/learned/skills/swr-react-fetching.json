{
  "category": "swr-react-fetching",
  "version": "1.0.0",
  "generatedBy": "Claude (Opus 4.5)",
  "description": "SWR React data fetching patterns",
  "skills": [
    {"id": "swr01", "type": "setup", "name": "Install SWR", "description": "NPM install", "pattern": "npm install swr", "example": "Install"},
    {"id": "swr02", "type": "basic", "name": "Basic Usage", "description": "Simple fetch", "pattern": "import useSWR from 'swr';\n\nconst fetcher = (url) => fetch(url).then(r => r.json());\n\nfunction Profile() {\n  const { data, error, isLoading } = useSWR('/api/user', fetcher);\n  \n  if (error) return <div>Error</div>;\n  if (isLoading) return <div>Loading...</div>;\n  return <div>{data.name}</div>;\n}", "example": "Basic"},
    {"id": "swr03", "type": "fetcher", "name": "Global Fetcher", "description": "Default fetcher", "pattern": "import { SWRConfig } from 'swr';\n\nconst fetcher = (...args) => fetch(...args).then(r => r.json());\n\nfunction App() {\n  return (\n    <SWRConfig value={{ fetcher }}>\n      <Page />\n    </SWRConfig>\n  );\n}", "example": "Global fetcher"},
    {"id": "swr04", "type": "key", "name": "Dynamic Key", "description": "Parameterized", "pattern": "function User({ id }) {\n  const { data } = useSWR(`/api/users/${id}`, fetcher);\n  return <div>{data?.name}</div>;\n}\n\n// Array key\nconst { data } = useSWR(['/api/users', id], ([url, id]) => fetchUser(url, id));", "example": "Dynamic key"},
    {"id": "swr05", "type": "conditional", "name": "Conditional Fetch", "description": "Enable/disable", "pattern": "// Return null to disable\nconst { data } = useSWR(shouldFetch ? '/api/data' : null, fetcher);\n\n// Or with function\nconst { data } = useSWR(() => isReady ? '/api/data' : null, fetcher);", "example": "Conditional"},
    {"id": "swr06", "type": "dependent", "name": "Dependent Fetch", "description": "Chained requests", "pattern": "function MyProjects() {\n  const { data: user } = useSWR('/api/user', fetcher);\n  const { data: projects } = useSWR(\n    () => `/api/users/${user.id}/projects`,\n    fetcher\n  );\n  return <Projects data={projects} />;\n}", "example": "Dependent"},
    {"id": "swr07", "type": "multiple", "name": "Multiple Requests", "description": "Parallel fetching", "pattern": "function Dashboard() {\n  const { data: user } = useSWR('/api/user', fetcher);\n  const { data: projects } = useSWR('/api/projects', fetcher);\n  const { data: events } = useSWR('/api/events', fetcher);\n  // All fetched in parallel\n}", "example": "Multiple"},
    {"id": "swr08", "type": "revalidate", "name": "Revalidation", "description": "Auto refresh", "pattern": "const { data } = useSWR('/api/data', fetcher, {\n  revalidateOnFocus: true,       // Default: true\n  revalidateOnReconnect: true,   // Default: true\n  revalidateIfStale: true,       // Default: true\n  refreshInterval: 3000,         // Poll every 3s\n  refreshWhenHidden: false,      // Default: false\n  refreshWhenOffline: false      // Default: false\n});", "example": "Revalidation"},
    {"id": "swr09", "type": "mutate", "name": "Manual Mutate", "description": "Update cache", "pattern": "import useSWR, { mutate } from 'swr';\n\nfunction Profile() {\n  const { data, mutate: boundMutate } = useSWR('/api/user', fetcher);\n  \n  const updateUser = async () => {\n    await fetch('/api/user', { method: 'POST', body: ... });\n    boundMutate();  // Revalidate\n  };\n}", "example": "Mutate"},
    {"id": "swr10", "type": "optimistic", "name": "Optimistic Update", "description": "Instant UI", "pattern": "const { data, mutate } = useSWR('/api/todos', fetcher);\n\nasync function addTodo(newTodo) {\n  // Optimistic update\n  mutate([...data, newTodo], false);\n  // Send request\n  await fetch('/api/todos', { method: 'POST', body: JSON.stringify(newTodo) });\n  // Revalidate\n  mutate();\n}", "example": "Optimistic"},
    {"id": "swr11", "type": "error", "name": "Error Handling", "description": "Handle errors", "pattern": "const { data, error, isLoading } = useSWR('/api/user', fetcher, {\n  onError: (error, key) => {\n    console.error('Error:', error);\n  },\n  shouldRetryOnError: true,\n  errorRetryCount: 3,\n  errorRetryInterval: 5000\n});", "example": "Error handling"},
    {"id": "swr12", "type": "loading", "name": "Loading State", "description": "isLoading vs isValidating", "pattern": "const { data, error, isLoading, isValidating } = useSWR(key, fetcher);\n\n// isLoading: No data yet & currently fetching\n// isValidating: Currently fetching (revalidation or initial)\n\nif (isLoading) return <Skeleton />;\nif (isValidating) return <Data data={data} refreshing />;\nreturn <Data data={data} />;", "example": "Loading"},
    {"id": "swr13", "type": "fallback", "name": "Fallback Data", "description": "Initial data", "pattern": "// Per-hook\nconst { data } = useSWR('/api/user', fetcher, {\n  fallbackData: { name: 'Loading...' }\n});\n\n// Global\n<SWRConfig value={{\n  fallback: {\n    '/api/user': { name: 'Guest' }\n  }\n}}>\n  <App />\n</SWRConfig>", "example": "Fallback"},
    {"id": "swr14", "type": "infinite", "name": "Infinite Loading", "description": "Pagination", "pattern": "import useSWRInfinite from 'swr/infinite';\n\nconst getKey = (pageIndex, previousPageData) => {\n  if (previousPageData && !previousPageData.length) return null;\n  return `/api/users?page=${pageIndex}&limit=10`;\n};\n\nconst { data, size, setSize, isLoading } = useSWRInfinite(getKey, fetcher);\n\n// data = [[page1], [page2], [page3], ...]", "example": "Infinite"},
    {"id": "swr15", "type": "infinite", "name": "Load More", "description": "Load more button", "pattern": "const { data, size, setSize, isValidating } = useSWRInfinite(getKey, fetcher);\n\nconst users = data ? data.flat() : [];\nconst isLoadingMore = size > 0 && data && typeof data[size - 1] === 'undefined';\nconst isEmpty = data?.[0]?.length === 0;\nconst isReachingEnd = isEmpty || (data && data[data.length - 1]?.length < 10);\n\n<button onClick={() => setSize(size + 1)} disabled={isLoadingMore || isReachingEnd}>\n  Load More\n</button>", "example": "Load more"},
    {"id": "swr16", "type": "subscription", "name": "Subscription", "description": "Real-time", "pattern": "import useSWRSubscription from 'swr/subscription';\n\nfunction Chat() {\n  const { data } = useSWRSubscription('/api/chat', (key, { next }) => {\n    const socket = new WebSocket(key);\n    socket.onmessage = (e) => next(null, JSON.parse(e.data));\n    socket.onerror = (e) => next(e);\n    return () => socket.close();\n  });\n}", "example": "Subscription"},
    {"id": "swr17", "type": "immutable", "name": "Immutable Data", "description": "Never revalidate", "pattern": "import useSWRImmutable from 'swr/immutable';\n\n// Data that never changes\nconst { data } = useSWRImmutable('/api/static-data', fetcher);\n\n// Equivalent to:\nuseSWR(key, fetcher, {\n  revalidateOnFocus: false,\n  revalidateOnReconnect: false,\n  revalidateIfStale: false\n});", "example": "Immutable"},
    {"id": "swr18", "type": "preload", "name": "Preload", "description": "Prefetch data", "pattern": "import { preload } from 'swr';\n\n// Preload on hover\nfunction Link({ href }) {\n  return (\n    <a\n      href={href}\n      onMouseEnter={() => preload(`/api/data?id=${id}`, fetcher)}\n    >\n      Click me\n    </a>\n  );\n}", "example": "Preload"},
    {"id": "swr19", "type": "mutation", "name": "useSWRMutation", "description": "Remote mutations", "pattern": "import useSWRMutation from 'swr/mutation';\n\nasync function sendRequest(url, { arg }) {\n  return fetch(url, { method: 'POST', body: JSON.stringify(arg) });\n}\n\nfunction App() {\n  const { trigger, isMutating } = useSWRMutation('/api/user', sendRequest);\n  \n  return <button onClick={() => trigger({ name: 'John' })}>Create</button>;\n}", "example": "Mutation"},
    {"id": "swr20", "type": "cache", "name": "Cache Provider", "description": "Custom cache", "pattern": "import { SWRConfig } from 'swr';\n\nfunction localStorageProvider() {\n  const map = new Map(JSON.parse(localStorage.getItem('app-cache') || '[]'));\n  \n  window.addEventListener('beforeunload', () => {\n    localStorage.setItem('app-cache', JSON.stringify([...map.entries()]));\n  });\n  \n  return map;\n}\n\n<SWRConfig value={{ provider: localStorageProvider }}>\n  <App />\n</SWRConfig>", "example": "Cache provider"},
    {"id": "swr21", "type": "dedup", "name": "Deduplication", "description": "Merge requests", "pattern": "// Automatic deduplication within 2 seconds (default)\n// Multiple components using same key = single request\n\nconst { data } = useSWR('/api/user', fetcher, {\n  dedupingInterval: 2000  // Default: 2000ms\n});", "example": "Dedup"},
    {"id": "swr22", "type": "global", "name": "Global Mutate", "description": "Mutate anywhere", "pattern": "import { mutate } from 'swr';\n\n// Revalidate all keys matching pattern\nmutate((key) => key.startsWith('/api/'));\n\n// Update specific key\nmutate('/api/user', { name: 'Updated' }, false);\n\n// Clear all cache\nmutate(() => true, undefined, { revalidate: false });", "example": "Global mutate"},
    {"id": "swr23", "type": "middleware", "name": "Middleware", "description": "Custom middleware", "pattern": "const logger = (useSWRNext) => (key, fetcher, config) => {\n  const swr = useSWRNext(key, fetcher, config);\n  \n  useEffect(() => {\n    console.log('Key:', key, 'Data:', swr.data);\n  }, [key, swr.data]);\n  \n  return swr;\n};\n\n<SWRConfig value={{ use: [logger] }}>", "example": "Middleware"},
    {"id": "swr24", "type": "suspense", "name": "Suspense Mode", "description": "React Suspense", "pattern": "import { Suspense } from 'react';\n\nfunction Profile() {\n  const { data } = useSWR('/api/user', fetcher, { suspense: true });\n  return <div>{data.name}</div>;  // data is guaranteed\n}\n\n<Suspense fallback={<Loading />}>\n  <Profile />\n</Suspense>", "example": "Suspense"},
    {"id": "swr25", "type": "typescript", "name": "TypeScript", "description": "Type safety", "pattern": "interface User {\n  id: number;\n  name: string;\n}\n\nconst fetcher = (url: string): Promise<User> =>\n  fetch(url).then(r => r.json());\n\nconst { data, error } = useSWR<User, Error>('/api/user', fetcher);", "example": "TypeScript"},
    {"id": "swr26", "type": "axios", "name": "Axios Fetcher", "description": "Use with Axios", "pattern": "import axios from 'axios';\n\nconst fetcher = (url) => axios.get(url).then(res => res.data);\n\nconst { data } = useSWR('/api/user', fetcher);", "example": "Axios"},
    {"id": "swr27", "type": "graphql", "name": "GraphQL", "description": "GraphQL fetcher", "pattern": "import { request } from 'graphql-request';\n\nconst fetcher = (query) => request('/api/graphql', query);\n\nconst { data } = useSWR(\n  `{ user { id name } }`,\n  fetcher\n);", "example": "GraphQL"},
    {"id": "swr28", "type": "retry", "name": "Retry Logic", "description": "Custom retry", "pattern": "const { data } = useSWR('/api/data', fetcher, {\n  onErrorRetry: (error, key, config, revalidate, { retryCount }) => {\n    if (error.status === 404) return;  // Don't retry 404\n    if (retryCount >= 10) return;      // Max 10 retries\n    setTimeout(() => revalidate({ retryCount }), 5000);\n  }\n});", "example": "Retry"},
    {"id": "swr29", "type": "test", "name": "Testing", "description": "Test components", "pattern": "import { SWRConfig } from 'swr';\n\nfunction TestWrapper({ children }) {\n  return (\n    <SWRConfig value={{ provider: () => new Map(), dedupingInterval: 0 }}>\n      {children}\n    </SWRConfig>\n  );\n}\n\ntest('renders', async () => {\n  render(<Profile />, { wrapper: TestWrapper });\n});", "example": "Testing"},
    {"id": "swr30", "type": "pattern", "name": "Best Practices", "description": "Patterns", "pattern": "// 1. Global fetcher for consistency\n// 2. Use fallbackData for SSR\n// 3. Conditional fetching for dependencies\n// 4. Optimistic updates for UX\n// 5. Custom cache for persistence", "example": "Best practices"}
  ]
}
