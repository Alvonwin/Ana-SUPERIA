{
  "category": "database-postgresql-patterns",
  "version": "1.0.0",
  "generatedBy": "Claude (Opus 4.5)",
  "description": "PostgreSQL database patterns and queries",
  "skills": [
    {"id": "pg01", "type": "connect", "name": "Connection String", "description": "PostgreSQL connection", "pattern": "postgresql://user:pass@host:5432/db", "example": "Connection URL"},
    {"id": "pg02", "type": "connect", "name": "Node.js Client", "description": "pg package", "pattern": "const { Pool } = require('pg'); pool.query(sql, params)", "example": "npm install pg"},
    {"id": "pg03", "type": "connect", "name": "Connection Pool", "description": "Pool connections", "pattern": "new Pool({ max: 20, connectionTimeoutMillis: 5000 })", "example": "Reuse connections"},
    {"id": "pg04", "type": "query", "name": "Parameterized Queries", "description": "Safe queries", "pattern": "SELECT * FROM users WHERE id = $1", "example": "Prevent SQL injection"},
    {"id": "pg05", "type": "query", "name": "Insert Returning", "description": "Return inserted row", "pattern": "INSERT INTO users (name) VALUES ($1) RETURNING *", "example": "Get ID back"},
    {"id": "pg06", "type": "query", "name": "Upsert", "description": "Insert or update", "pattern": "INSERT ... ON CONFLICT (key) DO UPDATE SET ...", "example": "Atomic upsert"},
    {"id": "pg07", "type": "query", "name": "Bulk Insert", "description": "Insert many rows", "pattern": "INSERT INTO t VALUES ($1,$2),($3,$4)... or COPY", "example": "Batch efficiency"},
    {"id": "pg08", "type": "transaction", "name": "Transactions", "description": "ACID transactions", "pattern": "BEGIN; ... COMMIT; or ROLLBACK;", "example": "Atomic operations"},
    {"id": "pg09", "type": "transaction", "name": "Node.js Transaction", "description": "Transaction in code", "pattern": "client.query('BEGIN'); try {...} catch { ROLLBACK } finally { COMMIT }", "example": "Error handling"},
    {"id": "pg10", "type": "index", "name": "Create Index", "description": "Add index", "pattern": "CREATE INDEX idx_name ON table(column)", "example": "Speed up queries"},
    {"id": "pg11", "type": "index", "name": "Index Types", "description": "Different indexes", "pattern": "B-tree (default), GIN (JSONB/arrays), GiST (geo)", "example": "Choose by use case"},
    {"id": "pg12", "type": "index", "name": "Partial Index", "description": "Conditional index", "pattern": "CREATE INDEX idx ON t(col) WHERE active = true", "example": "Smaller index"},
    {"id": "pg13", "type": "jsonb", "name": "JSONB Column", "description": "JSON data type", "pattern": "CREATE TABLE t (id SERIAL, data JSONB)", "example": "Flexible schema"},
    {"id": "pg14", "type": "jsonb", "name": "JSONB Queries", "description": "Query JSON data", "pattern": "SELECT * WHERE data->>'key' = 'value'", "example": "-> vs ->> operators"},
    {"id": "pg15", "type": "jsonb", "name": "JSONB Index", "description": "Index JSON fields", "pattern": "CREATE INDEX idx ON t USING GIN (data)", "example": "Fast JSON search"},
    {"id": "pg16", "type": "fulltext", "name": "Full Text Search", "description": "Text search", "pattern": "SELECT * WHERE to_tsvector(content) @@ to_tsquery('word')", "example": "Built-in search"},
    {"id": "pg17", "type": "array", "name": "Array Column", "description": "Array data type", "pattern": "CREATE TABLE t (tags TEXT[])", "example": "List of values"},
    {"id": "pg18", "type": "array", "name": "Array Queries", "description": "Query arrays", "pattern": "WHERE 'tag' = ANY(tags), WHERE tags @> ARRAY['a','b']", "example": "Contains check"},
    {"id": "pg19", "type": "cte", "name": "Common Table Expression", "description": "WITH clause", "pattern": "WITH cte AS (SELECT ...) SELECT * FROM cte", "example": "Readable queries"},
    {"id": "pg20", "type": "window", "name": "Window Functions", "description": "Analytics queries", "pattern": "ROW_NUMBER() OVER (PARTITION BY x ORDER BY y)", "example": "Ranking, running totals"},
    {"id": "pg21", "type": "view", "name": "Materialized Views", "description": "Cached query result", "pattern": "CREATE MATERIALIZED VIEW mv AS SELECT ...", "example": "REFRESH MATERIALIZED VIEW"},
    {"id": "pg22", "type": "constraint", "name": "Constraints", "description": "Data integrity", "pattern": "PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK, NOT NULL", "example": "Enforce rules"},
    {"id": "pg23", "type": "trigger", "name": "Triggers", "description": "Automatic actions", "pattern": "CREATE TRIGGER t BEFORE INSERT ON table FOR EACH ROW", "example": "Audit logging"},
    {"id": "pg24", "type": "function", "name": "Stored Functions", "description": "PL/pgSQL functions", "pattern": "CREATE FUNCTION fn() RETURNS type AS $$ BEGIN ... END; $$ LANGUAGE plpgsql", "example": "Server-side logic"},
    {"id": "pg25", "type": "explain", "name": "Query Analysis", "description": "Explain query plan", "pattern": "EXPLAIN ANALYZE SELECT ...", "example": "Optimize queries"},
    {"id": "pg26", "type": "lock", "name": "Row Locking", "description": "Pessimistic locking", "pattern": "SELECT ... FOR UPDATE", "example": "Prevent race conditions"},
    {"id": "pg27", "type": "migration", "name": "Schema Migrations", "description": "Version control schema", "pattern": "Prisma migrate, Knex migrations, Flyway", "example": "Tracked changes"},
    {"id": "pg28", "type": "backup", "name": "Database Backup", "description": "Backup and restore", "pattern": "pg_dump, pg_restore", "example": "Regular backups"},
    {"id": "pg29", "type": "replication", "name": "Replication", "description": "High availability", "pattern": "Streaming replication, logical replication", "example": "Read replicas"},
    {"id": "pg30", "type": "extension", "name": "Extensions", "description": "PostgreSQL extensions", "pattern": "CREATE EXTENSION uuid-ossp, postgis, pg_trgm", "example": "Extended features"}
  ]
}
