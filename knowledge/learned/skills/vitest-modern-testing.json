{
  "category": "vitest-modern-testing",
  "version": "1.0.0",
  "generatedBy": "Claude (Opus 4.5)",
  "description": "Vitest modern Vite-native testing patterns",
  "skills": [
    {"id": "vmt01", "type": "setup", "name": "Install Vitest", "description": "NPM install", "pattern": "npm install vitest --save-dev\nnpm install @vitest/coverage-v8 --save-dev\nnpm install @vitest/ui --save-dev", "example": "Install"},
    {"id": "vmt02", "type": "config", "name": "Vitest Config", "description": "Configuration", "pattern": "// vitest.config.ts\nimport { defineConfig } from 'vitest/config';\n\nexport default defineConfig({\n  test: {\n    globals: true,\n    environment: 'node',\n    include: ['src/**/*.test.ts']\n  }\n});", "example": "Config"},
    {"id": "vmt03", "type": "test", "name": "Basic Test", "description": "Test syntax", "pattern": "import { describe, it, expect } from 'vitest';\n\ndescribe('Math', () => {\n  it('adds correctly', () => {\n    expect(1 + 2).toBe(3);\n  });\n});", "example": "Basic test"},
    {"id": "vmt04", "type": "global", "name": "Global API", "description": "Auto imports", "pattern": "// vitest.config.ts\ntest: { globals: true }\n\n// tsconfig.json\n{ \"compilerOptions\": { \"types\": [\"vitest/globals\"] } }\n\n// Now no imports needed\ndescribe('test', () => {\n  it('works', () => expect(true).toBe(true));\n});", "example": "Globals"},
    {"id": "vmt05", "type": "matcher", "name": "Matchers", "description": "Assertions", "pattern": "expect(value).toBe(expected);\nexpect(obj).toEqual({ a: 1 });\nexpect(str).toMatch(/pattern/);\nexpect(arr).toContain(item);\nexpect(fn).toThrow();\nexpect(promise).resolves.toBe('value');", "example": "Matchers"},
    {"id": "vmt06", "type": "async", "name": "Async Tests", "description": "Async patterns", "pattern": "it('async', async () => {\n  const result = await fetchData();\n  expect(result).toBeDefined();\n});\n\nit('promise', () => {\n  return expect(fetchData()).resolves.toBe('data');\n});", "example": "Async"},
    {"id": "vmt07", "type": "mock", "name": "Mock Functions", "description": "vi.fn()", "pattern": "import { vi } from 'vitest';\n\nconst mock = vi.fn();\nmock.mockReturnValue('value');\nmock.mockResolvedValue('async');\nmock.mockImplementation(x => x * 2);\n\nexpect(mock).toHaveBeenCalled();", "example": "Mock fn"},
    {"id": "vmt08", "type": "mock", "name": "Mock Modules", "description": "vi.mock()", "pattern": "vi.mock('./api', () => ({\n  fetchUser: vi.fn(() => Promise.resolve({ id: 1 }))\n}));\n\nimport { fetchUser } from './api';\n// fetchUser is mocked", "example": "Mock module"},
    {"id": "vmt09", "type": "spy", "name": "Spy On", "description": "vi.spyOn()", "pattern": "const spy = vi.spyOn(object, 'method');\nspy.mockReturnValue('mocked');\n\nobject.method();\nexpect(spy).toHaveBeenCalled();\n\nspy.mockRestore();", "example": "Spy"},
    {"id": "vmt10", "type": "timer", "name": "Fake Timers", "description": "Mock time", "pattern": "vi.useFakeTimers();\nvi.setSystemTime(new Date('2024-01-01'));\n\nvi.advanceTimersByTime(1000);\nvi.runAllTimers();\n\nvi.useRealTimers();", "example": "Timers"},
    {"id": "vmt11", "type": "lifecycle", "name": "Lifecycle", "description": "Hooks", "pattern": "import { beforeAll, afterAll, beforeEach, afterEach } from 'vitest';\n\nbeforeAll(async () => { /* setup */ });\nafterAll(async () => { /* cleanup */ });\nbeforeEach(() => { vi.clearAllMocks(); });\nafterEach(() => {});", "example": "Lifecycle"},
    {"id": "vmt12", "type": "snapshot", "name": "Snapshots", "description": "Snapshot testing", "pattern": "it('matches snapshot', () => {\n  const result = formatData({ name: 'John' });\n  expect(result).toMatchSnapshot();\n});\n\nit('inline', () => {\n  expect(format(date)).toMatchInlineSnapshot(`\"2024-01-01\"`);\n});", "example": "Snapshots"},
    {"id": "vmt13", "type": "concurrent", "name": "Concurrent Tests", "description": "Parallel", "pattern": "describe.concurrent('parallel', () => {\n  it.concurrent('test 1', async () => {\n    await delay(100);\n    expect(true).toBe(true);\n  });\n  \n  it.concurrent('test 2', async () => {\n    await delay(100);\n    expect(true).toBe(true);\n  });\n});", "example": "Concurrent"},
    {"id": "vmt14", "type": "skip", "name": "Skip/Only/Todo", "description": "Filter tests", "pattern": "it.skip('skipped', () => {});\nit.only('only this', () => {});\nit.todo('implement later');\ndescribe.skip('skipped suite', () => {});", "example": "Skip/Only"},
    {"id": "vmt15", "type": "each", "name": "Parameterized", "description": "it.each()", "pattern": "it.each([\n  { a: 1, b: 1, sum: 2 },\n  { a: 2, b: 3, sum: 5 }\n])('$a + $b = $sum', ({ a, b, sum }) => {\n  expect(a + b).toBe(sum);\n});", "example": "Each"},
    {"id": "vmt16", "type": "type", "name": "Type Testing", "description": "expectTypeOf", "pattern": "import { expectTypeOf } from 'vitest';\n\nit('types', () => {\n  expectTypeOf(add).toBeFunction();\n  expectTypeOf(add(1, 2)).toBeNumber();\n  expectTypeOf<string>().toMatchTypeOf<string | number>();\n});", "example": "Types"},
    {"id": "vmt17", "type": "env", "name": "Environment", "description": "Test env", "pattern": "// Config\ntest: { environment: 'jsdom' }\n\n// Per file\n// @vitest-environment jsdom\n\n// Options: node, jsdom, happy-dom, edge-runtime", "example": "Environment"},
    {"id": "vmt18", "type": "coverage", "name": "Coverage", "description": "Code coverage", "pattern": "// vitest.config.ts\ntest: {\n  coverage: {\n    provider: 'v8',\n    reporter: ['text', 'html'],\n    exclude: ['node_modules']\n  }\n}\n\n// Run: vitest --coverage", "example": "Coverage"},
    {"id": "vmt19", "type": "ui", "name": "UI Mode", "description": "Visual UI", "pattern": "vitest --ui\n\n// Opens http://localhost:51204/__vitest__/\n// Interactive test runner with filtering", "example": "UI"},
    {"id": "vmt20", "type": "watch", "name": "Watch Mode", "description": "Auto re-run", "pattern": "vitest          # Default watch mode\nvitest run      # Single run\nvitest watch    # Explicit watch\nvitest -t 'pattern'  # Filter by name", "example": "Watch"},
    {"id": "vmt21", "type": "filter", "name": "Filtering", "description": "Run specific", "pattern": "vitest path/to/file.test.ts\nvitest --reporter=verbose\nvitest --bail 1\nvitest --changed  # Only changed files", "example": "Filter"},
    {"id": "vmt22", "type": "workspace", "name": "Workspace", "description": "Monorepo", "pattern": "// vitest.workspace.ts\nexport default defineWorkspace([\n  'packages/*/vitest.config.ts',\n  {\n    test: {\n      name: 'unit',\n      include: ['**/*.unit.test.ts']\n    }\n  }\n]);", "example": "Workspace"},
    {"id": "vmt23", "type": "browser", "name": "Browser Mode", "description": "Real browser", "pattern": "// vitest.config.ts\ntest: {\n  browser: {\n    enabled: true,\n    provider: 'playwright',\n    name: 'chromium'\n  }\n}", "example": "Browser"},
    {"id": "vmt24", "type": "reset", "name": "Reset Mocks", "description": "Clear state", "pattern": "beforeEach(() => {\n  vi.clearAllMocks();   // Clear call history\n  vi.resetAllMocks();   // Reset to initial\n  vi.restoreAllMocks(); // Restore original\n});", "example": "Reset"},
    {"id": "vmt25", "type": "context", "name": "Test Context", "description": "Shared data", "pattern": "beforeEach<{ db: Database }>(async (ctx) => {\n  ctx.db = await createTestDb();\n});\n\nit<{ db: Database }>('uses context', ({ db }) => {\n  expect(db).toBeDefined();\n});", "example": "Context"},
    {"id": "vmt26", "type": "extend", "name": "Extended Context", "description": "Custom fixtures", "pattern": "const test = base.extend({\n  db: async ({}, use) => {\n    const db = await createDb();\n    await use(db);\n    await db.close();\n  }\n});\n\ntest('uses db', ({ db }) => {\n  expect(db).toBeDefined();\n});", "example": "Extend"},
    {"id": "vmt27", "type": "reporter", "name": "Reporters", "description": "Output format", "pattern": "test: {\n  reporters: ['default', 'html', 'json'],\n  outputFile: {\n    json: './results.json',\n    html: './results.html'\n  }\n}", "example": "Reporters"},
    {"id": "vmt28", "type": "pool", "name": "Thread Pool", "description": "Execution mode", "pattern": "test: {\n  pool: 'threads',\n  poolOptions: {\n    threads: {\n      maxThreads: 4,\n      minThreads: 1\n    }\n  }\n}", "example": "Pool"},
    {"id": "vmt29", "type": "assert", "name": "Assertion Count", "description": "Expect count", "pattern": "it('counts assertions', async () => {\n  expect.assertions(2);\n  expect.hasAssertions();\n  \n  const data = await fetch();\n  expect(data).toBeDefined();\n  expect(data.length).toBeGreaterThan(0);\n});", "example": "Assert count"},
    {"id": "vmt30", "type": "bench", "name": "Benchmarking", "description": "Performance", "pattern": "import { bench, describe } from 'vitest';\n\ndescribe('perf', () => {\n  bench('array push', () => {\n    const arr = [];\n    arr.push(1);\n  });\n});\n\n// Run: vitest bench", "example": "Benchmark"}
  ]
}
